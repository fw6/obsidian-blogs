---
title: "ã€Šç¨‹åºäººç”Ÿã€‹"
description: ""
pubDate: "2023-08-14 13:26"
heroImage: "https://images.unsplash.com/photo-1535551951406-a19828b0a76b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1200&q=80"
date created: "2023-08-14 13:26"
date modified: "2023-08-14"
tags:
    - notes
    - Programming
---

> ç”Ÿå‘½ä¸åœ¨äºä½ æ´»äº†å¤šå°‘æ—¥å­ï¼Œè€Œæ˜¯ä½ è®°ä½äº†å¤šå°‘æ—¥å­ã€‚

## TOC


## ä¸¤ä¸‡å­—é•¿æ–‡ï¼šèŠèŠç¨‹åºäººç”Ÿ


[https://mp.weixin.qq.com/s/Ctc_Gs65Q0_ekqdikP45lw](https://mp.weixin.qq.com/s/Ctc_Gs65Q0_ekqdikP45lw)


### æˆ‘æƒ³ç‹¬ç«‹å®Œæˆä¸€ä¸ªäº§å“ï¼ŒæŠ€æœ¯ä¸Šè¯¥æ€ä¹ˆæå‡ï¼Ÿ

1. å¯¹è‡ªå·±çš„å®šä½ã€‚ä¸ªäººç‹¬ç«‹å®Œæˆï¼Œè¿˜æ˜¯åªæ˜¯å‰ç«¯å·¥ç¨‹å¸ˆã€åç«¯å·¥ç¨‹å¸ˆ
2. è¦å¸¦ç€é—®é¢˜å»å­¦ä¹ 
   - å‘ç°ç¼ºå¤±çš„å¾ˆå¤šçŸ¥è¯†ç‚¹ï¼Œæ€ä¹ˆå¼¥è¡¥ï¼Ÿ
   - å¼€å‘ä¸­ä½¿ç”¨ä»€ä¹ˆæ¶æ„ï¼Ÿ
   - å‰ç«¯å¼€å‘é¢†åŸŸå¦‚ä½•åšæŠ€æœ¯é€‰å‹ï¼Ÿ
   - åç«¯æŠ€æœ¯æ ˆå¦‚ä½•æŠ‰æ‹©ï¼Ÿ
   - ...
3. å¸æ”¶å’Œæ¶ˆåŒ–ä¸ºäº†è§£å†³å…·ä½“é—®é¢˜è€Œå¯»æ‰¾çš„åŠ©åŠ›ï¼Œå†…åŒ–æˆè‡ªå·±çš„ä¸œè¥¿
   è¾¹åšè¾¹å­¦ï¼Œè¾¹åšè¾¹æ¢ç´¢ï¼Œç„¶åæ€»ç»“ï¼Œå†…åŒ–

### æ€ä¹ˆæ‰¾åˆ°å¥½ç©çš„é¡¹ç›®ï¼Ÿ

- æ¶‰åŠåˆ°ä¿¡æ¯æ¥æºçš„é—®é¢˜
- é€›ä¸ªä¸¤ä¸‰æ¬¡ hacker news å’Œ Github trendingï¼ˆor followers's starsï¼‰ã€çœ‹ä¸€çœ‹å„ä¸ªå¼€å‘è€…èšé›†çš„åœ°æ–¹å¦‚Redditç›¸å…³ä¸»é¢˜è´´ã€ä¸€äº›å…¬ä¼—å·

### çœ‹è¿‡çš„æˆ–è€…å­¦è¿‡çš„æŠ€æœ¯ï¼Œå¦‚ä½•åœ¨éœ€è¦çš„æ—¶å€™æ‰¾å›æ¥ï¼Ÿ

åœ¨å¼€å§‹çœ‹æŸä¸ªä¸œè¥¿æ—¶ï¼Œå¦‚æœè§‰å¾—æœªæ¥åœ¨æŸä¸ªåœºæ™¯ä¸‹ä¼šå»ä½¿ç”¨å®ƒï¼Œä¼šåœ¨ç¬”è®°çš„å¯¹åº”çš„ä¸»é¢˜ä¸‹é¢

æ¯”å¦‚è¯´æˆ‘åœ¨ Github ä¸Š Star äº†å¾ˆå¤šå¾ˆæœ‰æ„æ€çš„åšæœç´¢çš„é¡¹ç›®ï¼Œæ¯”å¦‚è¯´ç°åœ¨åœ¨ Rust ä¸Šé¢æ¯”è¾ƒç«çš„ä¸€ä¸ªå« meilisearchï¼Œä¸€ä¸ªå« Sonicï¼Œè¿™äº›ä¸œè¥¿æˆ‘ç°åœ¨å¹¶ä¸éœ€è¦ï¼Œæ‰€ä»¥æˆ‘ç°åœ¨å¯èƒ½ä¸è§å¾—ä¼šç”¨åˆ°ä»–ä»¬ï¼Œä½†æ˜¯æˆ‘ä¼šæ”¾åœ¨æœç´¢çš„ä¸»é¢˜ä¸‹é¢ï¼Œä¸‹æ¬¡æˆ‘è¦æ·±å…¥äº†è§£æ¢ç´¢è¿™ä¸ªæ–¹å‘çš„æ—¶å€™ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šæ·±å…¥æ¢ç´¢ã€‚

ä¸å…‰æ˜¯ Github repoï¼Œè¿˜æœ‰æˆ‘åœ¨ Youtube å’Œ B ç«™ä¸Šçœ‹è¿‡çš„è§†é¢‘ï¼Œæˆ‘éƒ½ä¼šæ”¾åœ¨ä¸“é—¨çš„é¡µé¢é‡Œé¢ï¼Œåšæˆ databaseã€‚

å¦‚æœå¤šå°‘å¹´ä¹‹åæˆä¸ºä¸€ä¸ªä»€ä¹ˆæ ·çš„äººï¼Œæ¯”å¦‚æ¶æ„å¸ˆï¼Œé‚£ä¹ˆå…¶å®ä½ éœ€è¦åšçš„å°±æ˜¯ä½ å¹³æ—¶å¯¹ä½ æ‰€ç”¨çš„ä¸œè¥¿ï¼Œä½ æ„Ÿå…´è¶£çš„ä¸œè¥¿ï¼Œä¿æŒä¸€ä»½å¥½å¥‡å¿ƒï¼šä½ çœ‹åˆ°ä¸€ä¸ªä¸€ä¸ªäº§å“ï¼Œå°±è¦å»æƒ³è¿™ä¸ªäº§å“èƒŒåçš„é€»è¾‘æ˜¯ä»€ä¹ˆï¼Œå®ƒçš„åŠŸèƒ½æ˜¯æ€ä¹ˆæ ·å®ç°çš„ã€‚å¦‚æœæˆ‘è‡ªå·±è¦å®ç°çš„è¯ï¼Œ è¿™ä¸€å—åŠŸèƒ½ï¼Œé‚£å—åŠŸèƒ½æˆ‘è¯¥ç”¨ä»€ä¹ˆæ ·çš„å·¥å…·å®ç°ï¼Œæˆ‘æ˜¯è‡ªå·±å®ç°ï¼Œè¿˜æ˜¯æˆ‘æ‹¿ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œæˆ‘æœ‰å“ªäº›å·¥å…·å¯ä»¥ä½¿ç”¨ã€‚è¿™æ ·ä½ å°±å¯ä»¥æŠŠå¹³æ—¥é‡Œçœ‹åˆ°çš„ä¸œè¥¿å’Œä½ çš„æ€è·¯ä¸²è”èµ·æ¥ã€‚

ä½ å¯ä»¥é¡ºä¾¿å¤šæƒ³ä¸€äº›ï¼Œæ¯”å¦‚ï¼šå¦‚æœçœŸå¾—è¦å®ç°çš„è¯ï¼Œå®ç°åˆ°ä¸€ä¸ªä»€ä¹ˆæ ·çš„ç¨‹åº¦ï¼Œå¤§æ¦‚èŠ±å¤šå°‘é’±ï¼Ÿè¿™äº›ä¸œè¥¿æˆ‘è§‰å¾—å¯ä»¥åå¤å¯ä»¥åœ¨è‡ªå·±çš„è„‘æµ·é‡Œé¢å»æ¢ç´¢ï¼Œä½ ä¸ä¸€å®šå»åšï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™æˆ‘ä»¬é‡åˆ°çš„ä¸œè¥¿å¤ªå¤šäº†ï¼ŒçœŸæ­£å€¼å¾—ä½ å»æ·±å…¥ä¸‹é¢å»åšçš„ï¼Œä¸€å¹´å¯èƒ½ä¹Ÿå°±æ˜¯ä¸¤ä¸‰ä¸ªï¼Œå› ä¸ºä½ çš„æ—¶é—´ç²¾åŠ›æ¯•ç«Ÿæœ‰é™ã€‚

å¤§éƒ¨åˆ†çš„æ—¶å€™ä½ å³ä¾¿ä¸åšï¼Œä½ å¯ä»¥å»æƒ³ï¼Œå› ä¸ºæƒ³æœ¬èº«æƒ³çš„è¿‡ç¨‹å°±æœ¬èº«å·²ç»è¶³å¤Ÿå¥½äº†ï¼Œå› ä¸ºä½ åœ¨æ€è€ƒçš„æ—¶å€™ä½ ä¼šä½ ä¼šé‡åˆ°é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜å³ä¾¿ä½ ä¸æ˜¯å»å†™ä»£ç è§£å†³ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡å»æœç´¢ï¼Œä½ å¯ä»¥å»çœ‹çœ‹åˆ«äººæ˜¯åˆ«äººçš„è§£å†³æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Œç”šè‡³ä½ å¯ä»¥å¯¹è¿™ä¸ªäº§å“æœ¬èº«åš reverse engineeringï¼Œå»éªŒè¯ä½ çš„æƒ³æ³•å’Œäººå®¶åšçš„æ˜¯ä¸æ˜¯ä¸€æ ·ã€‚

è¿™äº›ä¸œè¥¿å…¶å®éƒ½æ˜¯ä½ åœ¨æ€è€ƒï¼Œä½ åœ¨ä½¿ç”¨ reverse engineering çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°è¿™æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œä»–æ²¡æœ‰è§£å†³å¥½ã€‚é‚£æˆ‘è¯¥æ€ä¹ˆæ ·è§£å†³å‘¢ï¼Ÿæˆ‘çš„æ–¹æ³•æ˜¯ä¸æ˜¯å¥½ï¼Œå¦‚æœå¥½ä¸ºä»€ä¹ˆå¥½ï¼Œå¦‚æœä¸å¥½çš„è¯ï¼Œè¿˜æœ‰ä»€ä¹ˆæ›´å¥½çš„è§£å†³åŠæ³•ç­‰ç­‰ã€‚è¿™ä¸ªå¾ªç¯å¾€å¤çš„è¿‡ç¨‹ä¼šè®©ä½ çš„è¿›æ­¥ä¼šå¾ˆå¿«ï¼Œå¾ˆå¤šäººè¯´æˆ‘åœ¨å¤§å…¬å¸é‡Œé¢æˆ–è€…åœ¨å…¬å¸é‡Œé¢ï¼Œæˆ‘ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜å°±æ˜¯ä¸€é¢—èºä¸é’‰ï¼Œæ¯å¤©èƒ½æ¥è§¦çš„äº‹æƒ…å°±é‚£ä¹ˆä¸€ç‚¹ï¼Œé‚£æ˜¯å› ä¸ºå¾ˆå¤šæ—¶å€™æœ‰ä¸€ä¸ªæ›´å¹¿é˜”çš„ä¸–ç•Œæˆ‘ä»¬å¯èƒ½è¿˜æ²¡æœ‰å»å‘ç°ã€‚

### å¦‚ä½•å®šä¹‰æ¬ç –ï¼Ÿå¦‚ä½•å½¢æˆåæ¬ç –çš„æ–‡åŒ–ï¼Ÿ

æ¬ç –ä¸å¦ï¼Œå› ä¸ºå…¶å®æˆ‘è§‰å¾—å¾ˆå¤šå…¬å¸çš„ï¼Œç¨‹åºå‘˜éƒ½ä¼šæœ‰è¿™æ ·çš„æ„Ÿæ…¨ï¼Œå°±æ˜¯æˆ‘çš„å·¥ä½œå¥½åƒå°±æ˜¯åœ¨æ¬ç –ï¼Œæˆ‘çš„å·¥ä½œå¥½åƒå°±æ˜¯åœ¨è¢«åŠ¨å¤„ç†äº§å“ç»ç†çš„æƒ³æ³•ï¼Œä»–ä»¬ä¸ç®¡æœ€ç»ˆè¿™ä¸ªäº§å“æœ¬èº«ä¼šç»™æŠ€æœ¯å¸¦æ¥å¤šå°‘çš„æŠ€æœ¯å€ºï¼Œéƒ½è¦æ±‚å¿…é¡»è¦åœ¨è§„å®šçš„æ—¶é—´ï¼Œä»¥è§„å®šçš„æ–¹å¼æ¥å®Œæˆï¼Œè¿™å°±ä¼šè®©å¤§å®¶äº§ç”Ÿä¸€ç§æ¬ç –çš„æ— åŠ›æ„Ÿã€‚æˆ‘è§‰å¾—è¿™æ˜¯å¾ˆå¤šå…¬å¸åœ¨æ–‡åŒ–ä¸Šé¢å½¢æˆçš„ä¸€ç§æ°›å›´ï¼Œå¾ˆå¤šæ—¶å€™éœ€è¦é æ—¶é—´æ¥æ…¢æ…¢å»æŠŠå®ƒæ”¹å˜ã€‚

ç¬¬ä¸€ä¸ªå¯¹æˆ‘ä»¬æ‰€åšçš„äº‹æƒ…ï¼Œä¸å…‰çŸ¥å…¶ç„¶ï¼Œè¿˜çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚
>å¸Œæœ›æˆ‘ä»¬æ‹›çš„å·¥ç¨‹å¸ˆï¼Œæˆ–è€…è¯´æˆ‘ä»¬çš„å·¥ç¨‹å¸ˆæœ¬èº«è¦æœ‰æå¤§çš„çƒ­æƒ…ï¼Œæƒ³æˆä¸ºä¸€ä¸ªéå¸¸ç‰›é€¼çš„å·¥ç¨‹å¸ˆã€‚æ€ä¹ˆå«ç‰›é€¼çš„å·¥ç¨‹å¸ˆï¼Œæˆ‘è§‰å¾—è¿™å¯èƒ½ä¹Ÿæ˜¯æˆ‘ä»¬æ¯ä¸€ä¸ªæŠ€æœ¯äººåº”è¯¥å»è¿½å¯»çš„æ–¹å‘ï¼Œ

ç¬¬äºŒä¸ªå°±æ˜¯ä½ è¦å¯¹ä½ æ‰€åšçš„ï¼Œé¢†åŸŸäº§å“æœ‰å¼ºçƒˆçš„ä¸»äººç¿çš„æ„è¯†ï¼Œownershipï¼Œå°±è¯´è¿™ä¸ªä¸œè¥¿å¥½åƒå°±åƒæˆ‘çš„å­©å­ä¸€æ ·ï¼Œæˆ‘ä¸çŸ¥é“å¤§å®¶æœ‰å¤šå°‘æœ‰å­©å­ï¼Œä½ å¯¹ä½ çš„å­©å­ä»˜å‡ºçš„åŠªåŠ›è·Ÿå¯¹ï¼Œåˆ«äººå®¶çš„å­©å­ä»˜å‡ºçš„åŠªåŠ›ï¼Œé‚£æ˜¯å®Œå…¨ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µçš„ã€‚

ç¬¬ä¸‰ä¸ªå°±æ˜¯ä½ çš„æ–¹æ¡ˆï¼Œä½ æå‡ºæ¥çš„æ–¹æ¡ˆä¸€å®šæ˜¯è¦èƒ½å¤Ÿï¼Œè½åœ°ï¼Œèƒ½å¤Ÿäº¤ä»˜çš„è¿™æ ·ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œä¸æ˜¯å¤©é©¬è¡Œç©ºçš„ç”»ä¸€ä¸ªå¤§çš„ pictureï¼Œç”»ä¸€ä¸ªéå¸¸é…·çš„ architectï¼Œæœ€åè°è½åœ°ï¼Œåæ­£æˆ‘å°±ææ–¹æ¡ˆä½ ä»¬æ¥è½åœ°ï¼Œæˆ‘ä»¬ä¸éœ€è¦è¿™æ ·çš„äººã€‚

ç¬¬å››ä¸ªå°±æ˜¯ä½ è¦å¯¹äº§å“ä¸­çš„æ§½ç‚¹è¦é›¶å®¹å¿ï¼Œä½ çš„äº§å“ç»ç†æå‡ºæ¥çš„ä¸€äº›ä¸åˆç†çš„äº§å“çš„éœ€æ±‚ï¼Œä½ è¦èƒ½ç»™ä»–æ‰“å›å»ï¼Œä½ å¦‚æœæ‰“ä¸å›å»ï¼Œä½ è¦èƒ½è®©ä½ çš„ç»ç†å»æ‰“å›å»ã€‚å½“ç„¶ä½ è¦æœ‰å……è¶³çš„ç†ç”±ï¼Œå……è¶³çš„æ•°æ®æ¥è¯´æ˜è¿™ä¸ªäº‹æƒ…ä¸å¯¹ã€‚

ç¬¬äº”ä¸ªå°±æ˜¯ä½ å¯¹é‡å¤çš„ä»»åŠ¡å’Œbugæ˜¯ä¸€ç§é›¶å®¹å¿çš„æ€åº¦ï¼Œæˆ‘ä»¬å·¥ç¨‹å¸ˆä¸ºä»€ä¹ˆä¼šäº§ç”Ÿä¸€ç§æ¬ç –çš„æ„Ÿè§‰ï¼Œé™¤äº†åˆšæ‰è®²çš„äº§å“ä¸Šé¢ä½ æœ‰å¾ˆå¤šé—®é¢˜ï¼Œä½ æ— åŠ›å»æ‰“ç ´ï¼Œè¿˜æœ‰ä¸€ä¸ªåœ¨å·¥ä½œä¸­æˆ‘ä»¬å¯èƒ½æœ‰å¤ªå¤šä¸åœé‡å¤çš„ä»»åŠ¡ï¼Œå› ä¸ºäº§å“çš„éœ€æ±‚æˆªæ­¢æ—¥æœŸå¤ªä¸¥è‹›ï¼Œå¯¼è‡´äºæˆ‘ä»¬åªèƒ½ç€çœ¼äºä»¥ç°åœ¨ï¼Œæ²¡åŠæ³•ç€çœ¼äºæœªæ¥ï¼Œæ²¡åŠæ³•æŠŠè¿™ä¸ªä¸œè¥¿æŠ½è±¡åœ¨ä¸€ä¸ªæ›´é«˜çš„å±‚æ¬¡ä¸Šé¢å»æŠ½è±¡ï¼ŒæŠŠå®ƒåšæˆæŸä¸€ä¸ªserviceï¼Œæˆ–è€…åšæˆä¸€ä¸ªå°±æ˜¯èƒ½æ¶µç›–åŒ…å«äº†è¿™ä¸ªåœºæ™¯ä¸‹é¢ä¸€ç³»åˆ—åœºæ™¯çš„è§£å†³æ–¹æ¡ˆã€‚

ç¬¬å…­ç‚¹æ˜¯ï¼šå½“ä½ æˆä¸ºæŸä¸ªé¢†åŸŸçš„ä¸“å®¶ä¹‹åï¼Œä½ åº”è¯¥è¿˜æ˜¯ä¿æŒä¸€ä¸ªéå¸¸å¼€æ”¾çš„å¿ƒæ€ï¼Œéšæ—¶æ„¿æ„åˆ‡æ¢ä½ çš„æŠ€æœ¯æ ˆå’Œæ–¹æ³•è®ºã€‚ä½ ä¸ä¼šå»æŠ—æ‹’ä»»ä½•ä¸åŒçš„æ€æƒ³ã€‚æ¯”å¦‚è¯´æˆ‘æ˜¯ä¸€ä¸ªå‡½æ•°å¼ç¼–ç¨‹çš„ç²‰ä¸ï¼Œæˆ‘å°±é„™è§†ä¸€åˆ‡é¢å‘è¿‡ç¨‹ç¼–ç¨‹çš„æ‰€æœ‰çš„æ–¹æ³•è®ºï¼›æˆ‘æ˜¯ä¸€ä¸ª react çš„å¼€å‘è€…ï¼Œæˆ‘å°±å¯¹ vue å……æ»¡äº†ä¸å±‘å’Œé„™è§†ï¼Œè®¤ä¸ºå®ƒæ˜¯åˆçº§ç¨‹åºå‘˜çš„ä¸“åˆ©ï¼Œæ˜¯é‚£äº›ç†è§£ä¸äº† react çš„äººæ‰ä¼šå†™çš„ä¸œè¥¿ã€‚æˆ‘è§‰å¾—æˆ‘ä»¬ç¨‹åºå‘˜ä¸åº”è¯¥æœ‰è¿™æ ·çš„å¿ƒæ€ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦åƒå°ç‹å­é‡Œé¢è¯´çš„é‚£æ ·ï¼Œåƒä¸€ä¸ªå°å­©å­ä¸€æ ·ï¼Œå¯¹ä»€ä¹ˆä¸œè¥¿éƒ½ä¿æŒå¤©ç„¶çš„å¥½å¥‡å¿ƒï¼Œæ„¿æ„æŠŠè‡ªå·±çš„é‚£äº›ã€Œæ˜Ÿæ˜Ÿã€éƒ½æ”¾åˆ°å¤©ç©ºä¸­ï¼Œè€Œä¸æ˜¯æŠŠå®ƒåŒ…è£¹èµ·æ¥è—å¾—å¾ˆæ·±ã€‚æ‰€ä»¥æœ‰å¿…è¦çš„è¯ä½ åº”è¯¥æ„¿æ„å»åˆ‡æ¢æŠ€æœ¯æ ˆï¼Œåˆ‡æ¢æ–¹æ³•è®ºï¼Œæœ‰æ›´å¥½çš„æ–¹æ³•ï¼Œä½ ä¼šæ„¿æ„å»å°è¯•ï¼Œä½ ä¼šæ„¿æ„å»ç”¨æ•°æ®æ¥è¯´æœè‡ªå·±å’Œåˆ«äººï¼šè¿™ä¸ªä¸œè¥¿å€¼å¾—æˆ‘ä»¬å»å»æŠ•å…¥ã€‚

æœ€åä¸€ç‚¹æ˜¯ä½ è¦æ€»æ˜¯èƒ½å¤Ÿè®©ä½ çš„å›¢é˜Ÿå˜å¾—æ›´å¼ºã€‚ä½ è‡ªå·±å¼ºè¿˜ä¸å¤Ÿï¼Œä½ æ€ä¹ˆæ ·èƒ½ç”¨ä½ è‡ªå·±çš„å¼ºå¤§ï¼Œä½ çš„å½±å“åŠ›ï¼Œæ— è®ºæ˜¯æŠ€æœ¯çš„å½±å“åŠ›è¿˜æ˜¯å…¶ä»–æ–¹é¢çš„å½±å“åŠ›ï¼Œè®©ä½ å‘¨å›´çš„äººå˜å¾—æ›´å¼ºã€‚

å·¥ç¨‹å¸ˆéœ€è¦è¶³å¤Ÿçš„æ—¶é—´å»å†…åŒ–ä»–æ‰€å­¦çš„ä¸œè¥¿ï¼Œå»æ·±åº¦åœ°è€ƒè™‘äº§å“ï¼Œåœ¨æ— æ•°ä¸ªå¯èƒ½çš„è§£å†³æ–¹æ¡ˆä¸­å»å¯»æ‰¾æ½œåœ¨çš„æœ€å¥½çš„æ–¹æ¡ˆã€‚

æ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªæ‚–è®ºï¼Œå°±æ˜¯äº§å“çš„éœ€æ±‚ï¼Œæˆ‘æ˜å¤©åå¤©ä¸‹å‘¨æˆ‘å°±è¦è¿™ä¹ˆä¸ªä¸œè¥¿ï¼Œè€Œå¾ˆå¤šæ—¶å€™ä¸æ˜¯ä½ ç»™æˆ‘ä¸€ä¸ªå›ºå®šçš„æ—¶é—´ï¼Œæˆ‘å°±èƒ½æŠŠè¿™ä¸ªäº‹æƒ…å®Œæˆçš„ã€‚è€Œä¸”ä¸€æ—¦ä½ ç»™äº†æˆ‘ä¸€ä¸ªå›ºå®šçš„æ—¶é—´ï¼Œæˆ‘èƒ½é‡‡ç”¨çš„æ–¹æ¡ˆï¼Œå¤§æ¦‚ç‡æ˜¯ä¼—å¤šçš„æ–¹æ¡ˆä¸­ä¸é‚£ä¹ˆå¥½çš„ï¼Œæˆ–è€…è¯´ä»…ä»…æ˜¯ä¸ºäº†è§£å†³é—®é¢˜è€Œè§£å†³é—®é¢˜çš„æ–¹æ¡ˆã€‚åœ¨è¿™ç§æ—¶é—´çš„å‹åŠ›ä¸‹ï¼Œä¼šå¯¼è‡´å·¥ç¨‹å¸ˆæ²¡æœ‰å®‰å…¨æ„Ÿï¼Œå› ä¸ºæˆ‘æ²¡æœ‰æ—¶é—´å»å……åˆ†æ€è€ƒï¼Œæˆ‘æ²¡æœ‰æ—¶é—´å»æ¢ç´¢ï¼Œäº§å“ä¸­æœ‰æ— æ•°çš„bugï¼Œæˆ‘æ²¡æœ‰æ—¶é—´å»å¤„ç†ï¼Œæˆ‘æ²¡æœ‰æ—¶é—´å»è¿½æ ¹è·‘åº•ï¼Œæˆ‘åªèƒ½å»ä¸€ä¸ªçš„æƒ³åŠæ³•æŠŠå®ƒç»•è¿‡å®ƒï¼Œæ‰¾ä¸€ä¸ªã€Œå¿«è€Œè„ã€ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç»ˆæçš„è§£å†³åŠæ³•å»æ•·è¡ã€‚æ‰€ä»¥è¿™éœ€è¦æ—¶é—´ï¼Œéœ€è¦ç»™å·¥ç¨‹å¸ˆä¸€ä¸ªè¶³å¤Ÿè¶³å¤Ÿé•¿çš„æ—¶é—´å»æ¥å‡ºæ¥æ¶ˆåŒ–è¿™ä¸ªä¸œè¥¿ï¼Œè®©å·¥ç¨‹å¸ˆè¶³å¤Ÿæœ‰è¶³å¤Ÿçš„æƒå¨ï¼Œèƒ½å¤Ÿ push backï¼Œè¯´è¿™ä¸ªä¸œè¥¿æˆ‘è§‰å¾—ä¸åˆç†ï¼Œä½ äº§å“è¿˜æ²¡æƒ³æ¸…æ¥šï¼Œä½ æƒ³æ¸…æ¥šäº†ä¹‹ååœ¨è·Ÿæˆ‘è°ˆï¼Œä¸ºä»€ä¹ˆæˆ‘è¯´ä½ æ²¡æƒ³æ¸…æ¥šï¼Œå› ä¸º case1ï¼Œcase2ï¼Œcase3 ç­‰ç­‰è¿™äº›ä¸œè¥¿ä½ æ²¡æœ‰è€ƒè™‘åˆ°ï¼Œè¿™äº›åœºæ™¯ä¸‹æˆ‘ä»¬è¯¥æ€ä¹ˆæ ·å»å¤„ç†ï¼Œä½ æ²¡æœ‰æƒ³ï¼Œæ‰€ä»¥è¿™ä¸ªä¸œè¥¿æˆ‘ä¸èƒ½åšã€‚è¿™æ˜¯å¾ˆå¤šå›½å†…çš„å…¬å¸è¿˜ç¼ºä¹çš„ä¸€ç§æ–‡åŒ–ï¼šå°±æ˜¯å·¥ç¨‹å¸ˆæ¥èƒ½å¤Ÿå¯¹äº§å“è¯´ NOã€‚å› ä¸ºä¸èƒ½è¯´ NOï¼Œæ‰€ä»¥ 996ç”šè‡³ 007 ä¹Ÿè¦æŠŠå®ƒå¼„å®Œã€‚è¿™å…¶å®æ˜¯ä¸€ä¸ªæ˜¯ä¸€ä¸ªå¾ˆæŠ˜ç£¨äººçš„è¿‡ç¨‹ï¼Œè¿™å¯¹æˆ‘ä»¬å·¥ç¨‹å¸ˆæ¥è®²ï¼Œæˆé•¿æ˜¯ä¸åˆ©çš„ï¼›é•¿è¿œæ¥è®²ï¼ŒçŸ­æœŸå…¬å¸å¾—åˆ°çš„ä¸€äº›åˆ©ç›Šï¼Œé•¿è¿œå¯èƒ½ä¹Ÿä¸è§å¾—é‚£ä¹ˆæœ‰åˆ©ã€‚

### å¦‚ä½•å¤„ç†æœ‰é™çš„èµ„æºå’Œäº§å“è´¨é‡ä¹‹é—´çš„å†²çªï¼Ÿ

å¤§éƒ¨åˆ†çš„å†³ç­–æˆ‘ä»¬è¦å»å»è®¨è®ºçš„ï¼Œæ˜¯ whyï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¦åšè¿™ä»¶äº‹æƒ…ï¼Œè¿™ä»¶äº‹æƒ…åšå‡ºæ¥ä¹‹åå¯¹æˆ‘ä»¬çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Œå¾ˆå¤šæ—¶å€™å…¬å¸çš„ CEO ä¹Ÿä¼šæ‹è„‘é—¨åšä¸€äº›å†³å®šï¼Œä¸è§å¾— CEO åšçš„å†³å®šéƒ½æ˜¯å¯¹çš„ï¼Œæœ‰å¯èƒ½å…¶ä¸­ 40% èƒ½è¢«æˆ‘ä»¬æŒ¡æ‰ï¼Œä½†å‰©ä¸‹çš„60%ï¼Œæ— è®ºå¦‚ä½•æ˜¯ä¸å¾—ä¸åšçš„ï¼Œå¹¶ä¸”å®ƒæ˜¯æœ‰ä¸€äº›æˆªæ­¢æ—¥æœŸçš„å‹åŠ›ï¼Œæ¯”å¦‚è¯´ä½ è¦ä¸ºäº†æŸä¸ªäº‹ä»¶ï¼Œåœ¨è¿™ä¸ªäº‹ä»¶ä¹‹å‰ï¼Œæˆ‘å¿…é¡»è¦åšå‡ºæ¥æŸä¸ªäº§å“çš„ featureï¼Œç”šè‡³æŸä¸ªäº§å“æ¥åº”å¯¹è¿™ä¸ªäº‹ä»¶ï¼Œå› ä¸ºæˆ‘çŸ¥é“è¿™æ ·çš„æ—¶æœºä¸€æ—¦é”™è¿‡ï¼Œå¯èƒ½ä¸‹ä¸€ä¸ªå‡ å¹´æ‰èƒ½é‡åˆ°çš„ä¸œè¥¿ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¦‚æœè¯´å•†ä¸šå†³ç­–æƒ³æ¸…æ¥šäº†ï¼ŒROI éƒ½ç®—å¥½äº†ï¼Œé‚£å°±æ˜¯ä¸€ä¸ªè°ƒåŠ¨èµ„æºçš„é—®é¢˜ï¼Œè¿™ä¸ªä¸œè¥¿æˆ‘ä»¬è¦è¯„ä¼°å®ƒçš„ scope æœ‰å¤šå¤§ï¼Œæœ‰å¤šå°‘èµ„æºå¯ä»¥å»ä½¿ç”¨ï¼Œæˆ‘ä»¬æ„¿æ„ä¸ºå®ƒä»˜å‡ºå¤šå°‘ä»£ä»·ï¼Œè¿™ä¸ªä»£ä»·ä¸å…‰æ˜¯å†…éƒ¨çš„ï¼Œè¿˜æœ‰å¤–éƒ¨çš„ã€‚å¦‚æœè‡ªå·±åšå—é™äºèµ„æºæ— æ³•åšåˆ°æ›´åŠ ç¨³å®šï¼Œé‚£ä¹ˆå¯ä¸å¯ä»¥æ‰¾ä»˜è´¹çš„ä¾›åº”å•†å»åšï¼Ÿ

æˆ‘è§‰å¾—æ˜¯å½“æˆ‘ä»¬æœ‰ä¸€äº›æˆªæ­¢æ—¥æœŸä¸å¾—ä¸å»æ»¡è¶³çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä»å·¥ç¨‹å¸ˆä» CTO æˆ–è€…æŠ€æœ¯éª¨å¹²çš„è§’åº¦ï¼Œæˆ‘ä»¬éœ€è¦å»è€ƒè™‘ï¼šæœ‰äº›ä¸œè¥¿æˆ‘ä»¬æ˜¯ä¸æ˜¯è¿™ä¸ªæ—¶åˆ»å¿…é¡»è¦è‡ªç ”ï¼Ÿå°±åƒclubhouseè¿™æ ·ï¼Œæˆ‘çš„æ ¸å¿ƒçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Œæˆ‘æ€ä¹ˆæ ·å»è°ƒé…æˆ‘çš„æ ¸å¿ƒèµ„æºå»åšæˆ‘çš„æ ¸å¿ƒåŠŸèƒ½ï¼ŒæŠŠä¸é‚£ä¹ˆæ ¸å¿ƒçš„åŠŸèƒ½ï¼Œæˆ‘å¦‚æœèƒ½å¤šèŠ±ä¸€äº›é’±å°±èƒ½è§£å†³çš„ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥å…ˆæŠŠå®ƒåœ¨è¿™ä¸ªæ—¶åˆ»ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡è§£å†³ï¼Ÿå› ä¸ºæ‰€æœ‰æŠ€æœ¯æˆ‘ä¸€èµ·ä¸Šçš„è¯ï¼Œä»¥æˆ‘ç°åœ¨çš„èµ„æºå°±æ˜¯æ»¡è¶³ä¸äº†è¿™ä¸ªæ—¥ç¨‹ã€‚æ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªåšå¼ˆçš„è¿‡ç¨‹ï¼Œä½ éœ€è¦è·Ÿåšå•†ä¸šå†³ç­–çš„é‚£äº›stakeholderï¼Œæ¯”å¦‚è¯´CEOè¦å»åšå¼ˆè¿™äº›ä¸œè¥¿ï¼Œä½ å¯ä»¥æå‡ºä¸€äº›æŠ€æœ¯çš„è§£å†³æ–¹æ¡ˆï¼Œä½ è¯´ ok ä¸ºäº†åšè¿™ä¹ˆä¸€ä¸ªä¸œè¥¿ï¼Œæˆ‘éœ€è¦ç”¨è¿™äº›ç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œè¿™äº›æœåŠ¡å¦‚æœç”¨æˆ·é‡çº§åœ¨è¿™ä¸ªç¨‹åº¦ä¸‹ä¸€ä¸ªæœˆçš„costæ˜¯å¤šå°‘ã€‚æˆ‘æŠŠè¿™ä¸ªä¸œè¥¿åˆ—å‡ºæ¥ï¼Œå¦‚æœ CEO ä¸åŒæ„ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦è¿™ä¹ˆå¤šèµ„æºï¼Œå¹¶ä¸”æˆ‘æ²¡åŠæ³•ä¿è¯èƒ½åœ¨æ—¥ç¨‹æˆªæ­¢ä¹‹å‰æˆ‘èƒ½å®Œæˆè¿™æ ·çš„ä¸œè¥¿ã€‚è¿™å°±æ˜¯ä¸€ä¸ªåšå¼ˆçš„è¿‡ç¨‹ï¼Œéœ€è¦è®¨ä»·è¿˜ä»·ã€‚ä¸æ˜¯è¯´ä»€ä¹ˆä¸œè¥¿ï¼Œåˆ«äººè¯´ ok æˆ‘å°±è¦åšï¼Œæˆ‘å°±è®©æˆ‘æ‰‹ä¸‹çš„è¿™å…„å¼Ÿä»¬æ‹¼å‘½åœ°åŠ ç­ï¼Œæ²¡æ—¥æ²¡å¤œçš„å»åšè¿™ä¸ªä¸œè¥¿ã€‚è¿™æ ·å­é•¿ä¹…ä¸äº†ï¼Œå¯èƒ½è¿˜ä¼šå¸¦æ¥å¾ˆå¤šçš„æŠ€æœ¯å€ºã€‚

:::tldr
å‘ä¸Šç®¡ç†
:::

### å›¢é˜Ÿåšå¤§ï¼Œäººæ‰å¯†åº¦æ˜¯è‚¯å®šä¸‹é™çš„ï¼Œä¸èƒ½è¦æ±‚äººäººéƒ½æœ‰ä¸»äººç¿çš„å¿ƒï¼Œèƒ½ä¸èƒ½ç”¨ç²¾ç»†çš„æµç¨‹æ¥é¿å…æ¬ç –ï¼Ÿ

æˆ‘è§‰å¾—è®¨è®ºå°±æ˜¯å¤§å®¶å’Œè€Œä¸åŒï¼Œæˆ‘èµåŒä½ é‡Œé¢çš„å¾ˆå¤šè§‚ç‚¹ï¼Œä¹Ÿä¸èµåŒé‡Œé¢çš„ä¸€äº›è§‚ç‚¹ï¼Œæ¯”å¦‚è¯´æˆ‘èµåŒäººæ‰å¯†åº¦é™ä½è¿™ä»¶äº‹æƒ…ï¼Œå°±æ˜¯å½“ä½ å…¬å¸åšå¤§äººæ‰å¯†åº¦è‚¯å®šï¼Œæ˜¯ä»¥æŒ‡æ•°çº§ä¸‹é™ï¼Œå¾ˆéš¾å»é¿å…ã€‚æ€ä¹ˆæ ·å»å°½é‡è®©ä¸‹é™çš„é€Ÿåº¦æ…¢ä¸€äº›å‘¢ï¼Ÿæˆ‘è§‰å¾—ä¸€ä¸ªå¾ˆå¥½çš„æ–¹å¼æ˜¯é€šè¿‡æ–‡åŒ–æ¥ä¿è¯ï¼Œä½ æ€ä¹ˆæ ·é€šè¿‡åŒä¸€ç§æ–‡åŒ–çš„æ„Ÿå¬åŠ›å»å¬å”¤é‚£äº›è®¤åŒä½ çš„æ–‡åŒ–çš„äººè¿›å…¥åˆ°ä½ çš„å…¬å¸ã€‚è¿™é‡Œç›¸å…³çš„ä¸œè¥¿æˆ‘å°±ä¸å±•å¼€æ¥è°ˆäº†ã€‚æˆ‘ç¨å¾®ä¸å¤ªè®¤åŒçš„æ˜¯è¿‡äºä¸¥è°¨çš„è§„åˆ™ã€‚æ¯ä¸ªå…¬å¸éƒ½æœ‰ä¸€å †çš„è§„ç« åˆ¶åº¦ï¼Œæœ‰ä¸€å †çš„æµç¨‹ï¼Œè¿™æ— å¯åšéã€‚

æµç¨‹åº”è¯¥æ˜¯èƒ½è¢«è‡ªåŠ¨åŒ–çš„ä¸œè¥¿ï¼Œå®ƒä¸éœ€è¦ä½ å»å­¦ä¹ å’Œéµå¾ªï¼Œå·¥å…·æœ¬èº«å°±å¸®åŠ©ä½ å‡†å®ˆæµç¨‹äº†ã€‚

æ¯”å¦‚è¯´å½“ä½ çš„ä»£ç æäº¤ä¹‹åï¼Œæœ‰ä¸€å †çš„ pre commit checkï¼Œè¦å»checkä½ çš„ä»£ç é£æ ¼å¯¹ä¸å¯¹ï¼Œä½ æ˜¯ä¸æ˜¯è¿‡äº†é™æ€æ£€æŸ¥ï¼Œæ˜¯ä¸æ˜¯è¿‡äº†å•å…ƒæµ‹è¯•ï¼Œæ‰€æœ‰è¿™äº›éƒ½é€šè¿‡åæ‰ä¼šå…è®¸ä½ æäº¤ä»£ç ã€‚ä½  push ä¸Šå»çš„æ—¶å€™ä¼šæœ‰ä¸€å †çš„ github action å»æ‰§è¡Œï¼Œå»ä»å„ä¸ªç»´åº¦å»çœ‹ä½ è¿™ä¸ªä»£ç ï¼Œæ˜¯ä¸æ˜¯ç¬¦åˆè¶³å¤Ÿè´¨é‡çš„ï¼Œæ˜¯ä¸æ˜¯ç ´åäº†ç°æœ‰çš„ code coverage ç­‰ç­‰ã€‚è¿™äº›ä¸œè¥¿ä¸åº”è¯¥æ˜¯å†™æˆæ–‡å­—å»ï¼Œè®©æ¯ä¸ªå·¥ç¨‹å¸ˆå»éµå®ˆçš„ï¼Œè€Œæ˜¯å°±åœ¨ä½ çš„å·¥å…·é“¾é‡Œï¼Œåœ¨ä½ çš„å…¬å¸çš„æ—¥å¸¸è¿ä½œçš„è¿‡ç¨‹ä¸­ï¼Œè‡ªç„¶è€Œç„¶åœ°å»ä½¿ç”¨è§„åˆ™å’Œæµç¨‹çº¦æŸæ¯ä¸ªå·¥ç¨‹å¸ˆçš„è¡Œä¸ºã€‚è€Œä¸”è¶Šå¥½çš„å›¢é˜Ÿä½ ä¼šå‘ç°è‡ªåŠ¨åŒ–çš„æµç¨‹è¶Šå¤šï¼Œå°±åƒæˆ‘ä»¬å†™ä»£ç ä¸€æ ·ï¼Œæ¡†æ¶æ˜¯å¹²ä»€ä¹ˆçš„ï¼Œæ¡†æ¶å°±æ˜¯ä¸€å †ä¸œè¥¿æ¥é™åˆ¶å¼€å‘è€…çš„è¡Œä¸ºï¼Œè®©æˆ‘ä»¬æœ‰æ‰€ä¸ºæœ‰æ‰€ä¸ä¸ºã€‚ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦åšä¿¡æ¯éšè—ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å»åšå„ç§å„æ ·çš„è§£è€¦ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å»ä½¿ç”¨å„ç§å„æ ·çš„è®¾è®¡æ¨¡å¼ï¼Œè¿™äº›å…¶å®éƒ½æ˜¯æµç¨‹ï¼Œè¿™äº›æµç¨‹éƒ½æ˜¯åˆ»åœ¨æˆ‘ä»¬å¹³æ—¶å¼€å‘è€…éª¨å­é‡Œçš„æµç¨‹ã€‚æˆ‘è§‰å¾—è¿™äº›è‡ªç„¶è€Œç„¶å‘ç”Ÿçš„æµç¨‹ï¼Œæ˜¯æœ€å¥½çš„æµç¨‹ã€‚

ä»å¦å¤–ä¸€ä¸ªè§’åº¦æ¥è®²ï¼Œæˆ‘è§‰å¾—çœŸæ­£çš„äººæ‰ï¼Œå¦‚æœçœŸçš„æŠŠç¨‹åºå‘˜çœ‹åšè‰ºæœ¯å®¶çš„è¯ï¼Œæˆ‘ä»¬å¾ˆéš¾ç”¨è§„åˆ™å»æ¥æ¡†å®šå®ƒï¼Œå°±åƒæˆªæ­¢æ—¥æœŸä»¶äº‹æƒ…ï¼Œå¦‚æœè¯´ä½ æ¯•åŠ ç´¢åœ¨ 10 å¤©ä¹‹å†…ç”»å‡ºæ¥æŸå¹…æŒ‡å®šè¦æ±‚çš„ç”»ï¼Œé‚£ä¹ˆæ¯•åŠ ç´¢å¯èƒ½ç”»å‡ºæ¥çš„ï¼Œå°±è·Ÿæˆ‘ä»¬æ™®é€šçš„ä¸€ä¸ªç”»å¸ˆç”»å‡ºæ¥çš„æ˜¯ä¸€æ ·çš„ä¸œè¥¿ã€‚æ¢­ç½—åœ¨ç“¦å°”ç™»æ¹–é‡Œé¢ï¼Œè®²è¿‡ä¸€å¥è¯ï¼Œæˆ‘ç‰¹åˆ«å–œæ¬¢ï¼Œä»–è¯´ï¼šèƒ½ç»´æŒä¸€åªå…”å­ç”Ÿæ´»çš„ç”°é‡ä¸€å®šæ˜¯è´«ç˜ æ— æ¯”çš„ï¼Œæˆ‘è§‰å¾—å¥½çš„å…¬å¸å®ƒå°±æ˜¯å¥½çš„å…¬å¸ï¼Œä¸å¥½çš„å…¬å¸å®ƒå°±æ˜¯ä¸å¥½çš„å…¬å¸ï¼Œå¾ˆå¤šå…¬å¸å¤§äº†ä¹‹åï¼Œå®ƒå¯èƒ½åªæ˜¯æ¯”å°çš„æ—¶å€™æ²¡æœ‰é‚£ä¹ˆï¼Œå¥½è€Œå·²ï¼Œä½†å®ƒä¾æ—§æ˜¯å¥½çš„å…¬å¸ï¼Œå¥½çš„å…¬å¸å¾ˆå¤šå…¬å¸å®ƒå¾ˆå°çš„æ—¶å€™ï¼Œå°±è·Ÿä¸Šå¯èƒ½ä¸æ˜¯ä¸€ä¸ªå¥½çš„å…¬å¸ï¼Œå®ƒå¤§äº†ä¹‹åä¹Ÿä¸€å®šä¸ä¼šæ˜¯ä¸€ä¸ªå¥½çš„å…¬å¸ã€‚


## å®¢æˆ·ç«¯è½¯ä»¶çš„è½®å›ï¼šæ›´å¥½è¿˜æ˜¯æ›´ç³Ÿç³•ï¼Ÿ

å¯¹ SaaS è½¯ä»¶çš„æ„¿æ™¯
- å®¢æˆ·ç«¯è½¯ä»¶å¯ä»¥çœŸæ­£åšåˆ°æ•°æ®çš„ local firstï¼Œäº‘ç«¯çš„æ•°æ®æ›´åƒæ˜¯ä¸€ä¸ªæ•°æ®çš„è¶…é›†æˆ–è€…å¤‡ä»½ã€‚
- å½“æ•°æ® local first åï¼Œå¯¹æ•°æ®çš„å„ç§æ“ä½œï¼ˆèšåˆï¼Œè¿‡æ»¤ï¼ŒæŸ¥è¯¢ç­‰ï¼‰éƒ½å¯ä»¥åˆ©ç”¨æœ¬åœ° CPU çš„å¼ºæ‚æ€§èƒ½ç›´æ¥å¤„ç†ï¼Œè€Œæ— éœ€è·¨è¿‡ç½‘ç»œã€‚
- ååŒå·¥ä½œï¼Œå¯¹å…¬å¸ï¼ˆç»„ç»‡ï¼Œå›¢é˜Ÿç­‰ï¼‰å†…éƒ¨çš„äººå‘˜æ¥è¯´ï¼Œç”±æƒé™ç³»ç»Ÿä»¥åŠè¦åŒæ—¶å¤„ç†æŸä¸€ä¸ªæ–‡æ¡£æˆ–è€…æ•°æ®çš„ N ä¸ªäººï¼ˆè®¾å¤‡ï¼‰ä¹‹é—´çš„å¯ä¿¡å…±è¯†ï¼ˆæ¯”å¦‚ raft concensusï¼‰å¤„ç†å³å¯ â€”â€” è¿™åº”è¯¥æ˜¯ç»å¤§å¤šæ•°çš„ä½¿ç”¨åœºæ™¯ï¼›å¦‚æœå‚ä¸è€…ä¸å¯ä¿¡ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ä¸å¯ä¿¡å…±è¯†ï¼ˆæ¯”å¦‚ BFT consensusï¼‰ã€‚
- å¦‚æœèƒ½è¿›ä¸€æ­¥ï¼Œåˆ¨é™¤æœåŠ¡å™¨ï¼ˆæˆ–è€…æœåŠ¡å™¨ä»…ä»…åšå¤‡ä»½çš„åŠŸç”¨ï¼‰ï¼Œå®Œå…¨å»ä¸­å¿ƒåŒ–ï¼Œé‚£å°†æ›´åŠ ç¾å¦™ï¼Œä¸è¿‡åœ¨èµ„æœ¬å¸‚åœºè¿™ä¸ªæ•…äº‹å¾ˆéš¾è®²å¥½ï¼ˆéœ€è¦æ–°çš„ä¼°å€¼æ¨¡å‹ï¼‰ã€‚


## æƒ³è±¡åŠ›ï¼Œå·¥ç¨‹æ–¹æ³•ä»¥åŠå–èˆ

[https://mp.weixin.qq.com/s/3OlEBl9ybiNQ2s328DVCEQ](https://mp.weixin.qq.com/s/3OlEBl9ybiNQ2s328DVCEQ)

### å¦‚ä½•ä¿è¯ single source of truthï¼ˆä»¥ä¸‹ç®€ç§° SSTï¼‰?
![image.png](https://raw.githubusercontent.com/fw6/assets/main/toy_docs/20230814140759.png)
åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿé‡Œï¼Œèƒ½è¢«æ­£ç¡®ç”¨ä½œ SST çš„åªæœ‰äº‹ä»¶ï¼ˆeventï¼Œæˆ–è€… operationï¼‰ã€‚ä»æ•´ä¸ªåº”ç”¨çš„è§’åº¦ï¼Œä¸»æµçš„æ€æƒ³æ˜¯æŠŠå¹¿ä¹‰çš„æ•°æ®åº“ï¼ˆRDBMSï¼ŒDDBMSï¼Œkv storeï¼Œobject storeï¼‰ä½œä¸º SSTï¼Œè¿™æ— å¯åšéï¼Œä½†æˆ‘ä»¬ä¸èƒ½å› æ­¤æ¨æ–­å‡ºæ•°æ®åº“å°±ç­‰åŒäº SSTï¼Œæˆ–è€…å¾—å‡ºç»“è®ºæ²¡æœ‰æ•°æ®åº“å°±æ²¡æœ‰ SSTã€‚ä»æ•°æ®åº“çš„è§’åº¦çœ‹ï¼Œæ•°æ®åº“é‡Œå­˜å‚¨çš„æ•°æ®ï¼ˆçŠ¶æ€ï¼‰å¹¶ä¸æ˜¯ SSTï¼Œæ•°æ®åº“çš„ SST æ˜¯ä¸€ä¸ªä¸ªçš„ op â€”â€” ä½ å¯ä»¥ç†è§£ä¸ºå¢åˆ æ”¹çš„åŠ¨ä½œ â€”â€” å®ƒä»¬å°±æ˜¯ä¸€ä¸ªä¸ªäº‹ä»¶ã€‚è¿™æ˜¯æœ€åŸå§‹ï¼Œä¹Ÿæœ€å®¹æ˜“åœ¨é›†ç¾¤ä¸­å¤åˆ¶çš„ä¿¡æ¯ï¼Œæ•°æ®åº“çš„çŠ¶æ€å¯ä»¥é€šè¿‡è¿™äº› oplog/WAL æŒ‰é¡ºåºè¿­åŠ æ¢å¤å‡ºæ¥ã€‚

åœ¨ web app é‡Œï¼Œæˆ‘ä»¬åœ¨æ›´é«˜çš„å±‚æ¬¡å®ç°ä¸šåŠ¡é€»è¾‘ï¼Œå› æ­¤å¯ä»¥æŠŠæ•°æ®åº“é‡Œçš„æ•°æ®ï¼ˆçŠ¶æ€ï¼‰ä½œä¸º SSTã€‚å› ä¸ºæˆ‘ä»¬çŸ¥é“ï¼Œä¸ç®¡æ•°æ®åº“çš„å®ç°æ˜¯å¼ºä¸€è‡´æ€§ï¼Œè¿˜æ˜¯å¼±ä¸€è‡´æ€§ï¼Œå®ƒä»¬éƒ½èƒ½ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ï¼ˆå½“æ›´æ–°åœæ­¢æ—¶ï¼Œæœ€ç»ˆæ‰€æœ‰çš„æ•°æ®åº“èŠ‚ç‚¹éƒ½èƒ½èšåˆåˆ°åŒæ ·çš„æ•°æ®ï¼‰ã€‚è€Œä¿è¯äº†æœ€ç»ˆä¸€è‡´æ€§çš„æ•°æ®åº“ï¼Œå°±æœ‰èµ„æ ¼è¢«å½“åš SSTã€‚

å½“æˆ‘ä»¬æŠŠæ•°æ®ä¸‹æ”¾åˆ°æ¯ä¸ªå®¢æˆ·ç«¯æ—¶ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯å…¶å®å¯ä»¥è¢«çœ‹åšæ‰€æœ‰å®¢æˆ·ç«¯ç»´æŠ¤çš„æ•°æ®åº“ç³»ç»Ÿçš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚ä¸Šå›¾ä¸­ä¸€ä¸ªä¸ª listï¼Œå°±æ˜¯çŠ¶æ€ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è¿™äº›çŠ¶æ€çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚è€Œæ ¹æ®æ•°æ®åº“çš„æ€è·¯ï¼ŒSST æ˜¯äº‹ä»¶ â€”â€” ç”¨æˆ·å¯¹ list çš„å„ç§æ“ä½œã€‚è¿™äº›äº‹ä»¶ä¸»è¦æœ‰ï¼š
- åœ¨ list é‡Œæ·»åŠ ä¸€ä¸ªæ–°çš„æ•°æ®é¡¹
- ä¿®æ”¹ä¸€ä¸ªå·²æœ‰çš„æ•°æ®é¡¹
- åˆ é™¤ä¸€ä¸ªå·²æœ‰çš„æ•°æ®é¡¹
- ç§»åŠ¨ä¸€ä¸ªå·²æœ‰çš„æ•°æ®é¡¹

æˆ‘ä»¬å¦‚æœèƒ½åœ¨æ‰€æœ‰å‚ä¸çš„èŠ‚ç‚¹ä¸­ç¡®ä¿æ‰€æœ‰çš„äº‹ä»¶éƒ½è¢«æ­£ç¡®æ‰©æ•£ï¼Œé‚£ä¹ˆï¼Œé€šè¿‡è¿­åŠ è¿™äº›äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°æœ€ç»ˆä¸€è‡´çš„çŠ¶æ€ã€‚

### é€šè¿‡è¿­åŠ è¿™äº›äº‹ä»¶ï¼Œå¾—åˆ°æœ€ç»ˆä¸€è‡´çš„çŠ¶æ€?

ã€Œä¸å¯èƒ½å…ˆç”Ÿã€çš„å¤´å‡ ä¸ªè´¨ç–‘ï¼š
1. ç½‘ç»œä¸ç¨³å®šï¼Œäº‹ä»¶æœ‰å¯èƒ½ä¸¢ï¼›
2. äº‹ä»¶åˆ°è¾¾ä¸åŒå®¢æˆ·ç«¯çš„é¡ºåºå¯èƒ½ä¸ä¸€è‡´ã€‚

å‡è®¾æˆ‘ä»¬æœ‰åŠæ³•åšåˆ°ä¸ä¸¢äº‹ä»¶ï¼Œå¹¶ä¸”ä¿æŒåŒæ ·çš„äº‹ä»¶é¡ºåºã€‚æ‰€æœ‰çš„å®¢æˆ·ç«¯çš„çŠ¶æ€éƒ½å¯ä»¥è¢«æè¿°æˆï¼ˆS ä»£è¡¨çŠ¶æ€ï¼ŒE ä»£è¡¨äº‹ä»¶ï¼Œ+ ä»£è¡¨äº‹ä»¶å åŠ ï¼‰ï¼š
![image.png](https://raw.githubusercontent.com/fw6/assets/main/toy_docs/20230814141201.png)

ä¸ä¸¢äº‹ä»¶å¦‚ä½•ä¿è¯ï¼Ÿ
- å¦‚æœç”¨ä¸­å¿ƒåŒ–çš„è§£å†³æ–¹æ³•ï¼Œå¯ä»¥å¼•å…¥ä¸€ä¸ª message queueï¼ˆå…¶å®å˜ç›¸å¼•å…¥äº† raft è¿™ç±» CFT å…±è¯†ç®—æ³•ï¼‰
- å¦‚æœå»ä¸­å¿ƒåŒ–çš„è§£å†³æ–¹æ¡ˆï¼Œéœ€è¦å¼•å…¥ç±»ä¼¼åŒºå—é“¾æŠ€æœ¯ä½¿ç”¨çš„å…±è¯†æœºåˆ¶æ¥ç¡®ä¿é¡ºåºï¼ˆåŒºå—é“¾çš„åŒºå—ï¼Œå®è´¨ä¸Šæ˜¯ä¸€ä¸ªå…¨å±€æ—¶é’Ÿï¼Œå®ƒç”¨æ¥æä¾›ä¸€è‡´çš„äº‹ä»¶é¡ºåº

è¦æ±‚æ‰€æœ‰çš„å®¢æˆ·ç«¯éƒ½çœ‹åˆ°é¡ºåºä¸€è‡´çš„äº‹ä»¶ï¼Ÿ
- äº‹ä»¶åˆ°äº†æœåŠ¡å™¨ä¹‹åè¢«æ’åºï¼Œå®¢æˆ·ç«¯éœ€è¦æŒ‰ç…§æœåŠ¡å™¨è¦æ±‚çš„é¡ºåºç”ŸæˆçŠ¶æ€ã€‚
  ä¸ä»…ä»…è¦æ”¯æŒè¿­åŠ çš„æ“ä½œï¼ˆ+ï¼‰ï¼Œè¿˜éœ€è¦æ”¯æŒå›æ»šï¼ˆ-ï¼‰
äº§ç”Ÿäº†æ–°çš„é—®é¢˜ğŸ™‹ï¼Œå¦‚ä½•è§£å†³å†²çªï¼Ÿå…ˆæŒ‰ä¸‹ä¸è¡¨

![image.png](https://raw.githubusercontent.com/fw6/assets/main/toy_docs/20230814141801.png)

å¦‚ä½•ç¡®ä¿ä¸åŒå®¢æˆ·ç«¯çœ‹åˆ°çš„æ•°æ®ä¸€è‡´ï¼Ÿ
1. list é‡Œæ‰€æœ‰æ•°æ®éƒ½æœ‰å…¨å±€å”¯ä¸€çš„ idã€‚è¿™é‡Œæˆ‘ä»¬ç”¨ task1, task2, ...ã€‚æ•°æ®çš„ id ä¸­åŒ…å«å®¢æˆ·ç«¯çš„ idã€‚
2. æ¯ä¸ªæ•°æ®æœ‰ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å‰ä¸€ä¸ªæ•°æ®ï¼Œä»¥ä¾¿äºæˆ‘ä»¬å®šä½å…¶ç›¸å¯¹ä½ç½®ï¼Œç§»åŠ¨æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°è¿™ä¸ªæŒ‡é’ˆæ¥ä¿æŒæ•°æ®çš„ç›¸å¯¹ä½ç½®ã€‚
3. id ä¹‹é—´æ˜¯å¯ä»¥æ¯”è¾ƒçš„ï¼Œæ¯”å¦‚ä¸Šå›¾ A å’Œ B éƒ½åœ¨ task5 ä¹‹åæ’å…¥äº†ä¸€ä¸ªæ–°çš„ itemï¼Œæˆ‘ä»¬å®šä¹‰ b6 > a6 çš„æ¯”è¾ƒå…³ç³»ï¼ˆè¿™ä¸ªæ— æ‰€è°“ï¼Œä¹Ÿå¯ä»¥ a6 > b6ï¼‰ï¼Œè¿™æ ·ï¼Œtask_b6 çš„å‰ä¸€ä¸ªæ•°æ®æ˜¯ task5ï¼Œè€Œ task_a6 çš„å‰ä¸€ä¸ªæ•°æ® task_b6ã€‚

### å¦‚ä½•è§£å†³å†²çªï¼Ÿ

å¹¸è¿çš„æ˜¯ï¼Œç›®å‰å·²ç»æœ‰å¾ˆå¤šå·²çŸ¥çš„ç®—æ³•æ¥è§£å†³åœ¨çº¿åä½œçš„é—®é¢˜ã€‚å…¶ä¸­å…¸å‹çš„ä¸¤ç§ç®—æ³•æ˜¯ OTï¼ˆOperational Transformationï¼‰å’Œ CRDTï¼ˆConflict-free Replicated Data Typesï¼‰ã€‚

:::tip
ä¸€ç¯‡å¾ˆä¸é”™çš„æ–‡ç« ï¼Œæ¥è‡ªå›½å†…AlloyTeamçš„[ååŒç¼–è¾‘å†²çªå¤„ç†ç®—æ³•ç»¼è¿°](https://mp.weixin.qq.com/s/nvh-z61vWGlv_lbCrjZ59w)
:::

#### OT

OT æ˜¯ä¸€ä¸ªæ€è·¯ç®€å•ï¼Œä½†å®ç°å¤æ‚çš„ç®—æ³•ï¼Œå…¶åŸºæœ¬æ€æƒ³æ˜¯ï¼Œä¸åŒçš„èŠ‚ç‚¹åœ¨æ”¶åˆ°ä¸åŒé¡ºåºçš„äº‹ä»¶ï¼ˆåœ¨ OT ä¸‹æ˜¯ operationï¼‰æ—¶ï¼Œå°†åç»­çš„ OP è¿›è¡Œ transformï¼Œä½¿å…¶èƒ½å¤Ÿåˆ†åˆ«èšåˆå‡ºç›¸åŒçš„çŠ¶æ€ï¼Œå¦‚ä¸‹å›¾ï¼š
![image.png](https://raw.githubusercontent.com/fw6/assets/main/toy_docs/20230814142057.png)
é‚£ä¹ˆè°æ¥åšè¿™ä¸ª transformation å‘¢ï¼ŸæœåŠ¡å™¨ã€‚Peer1 å’Œ peer2 åœ¨æ‰§è¡Œäº†è‡ªå·±çš„æ“ä½œ OP1 å’Œ OP2 åï¼Œå°†æ“ä½œé€šè¿‡æœåŠ¡å™¨å‘é€ç»™å¯¹ç«¯ï¼ŒæœåŠ¡å™¨æ ¹æ®æ”¶åˆ°çš„ OPï¼Œå¯ä»¥ç¡®å®šä¸€ä¸ªå”¯ä¸€çš„é¡ºåºï¼Œä¹Ÿå°±æ˜¯èƒ½å¤Ÿç¡®å®šä¸€ä¸ªå”¯ä¸€çš„æœ€ç»ˆçŠ¶æ€ï¼Œç„¶åæœåŠ¡å™¨å†æ ¹æ®æ¯ä¸ªå®¢æˆ·ç«¯çš„ä¸åŒæƒ…å†µï¼Œå¯¹å°†è¦è½¬å‘ç»™å®¢æˆ·ç«¯çš„ OPï¼ˆå¯¹äº pper1 æ˜¯ OP2ï¼Œå¯¹äº peer2 æ˜¯ OP1ï¼‰è¿›è¡Œç›¸åº”çš„ transformationï¼Œç„¶åå‘é€ä¹‹ã€‚è¿™æ ·ï¼Œå®¢æˆ·ç«¯åœ¨æ¥æ”¶åˆ°ä¿®æ”¹åçš„ OP åï¼Œå¯ä»¥ç”Ÿæˆå’ŒæœåŠ¡å™¨ä¸€è‡´çš„çŠ¶æ€ã€‚

#### CRDT

å¦‚æœè¯´ OT æ˜¯ä¸€ä¸ªä¸­å¿ƒåŒ–çš„è§£å†³æ–¹æ¡ˆï¼Œé‚£ä¹ˆ CRDT åˆ™æ˜¯ä¸€ä¸ªéä¸­å¿ƒåŒ–çš„è§£å†³æ–¹æ¡ˆã€‚

:::tip
æ–‡ç« ã€æ’­å®¢ï¼š
- æ¥è‡ªAlloyTeamçš„å…¬ä¼—å·æ–‡ç« [Yjsâ€”â€”ä¸€ä¸ªåŸºäºCRDTçš„æ•°æ®ååŒæ¡†æ¶](https://mp.weixin.qq.com/s/cHqXWL54TKSQjL33JSGQ_w)
- æ¥è‡ªZedä»£ç ç¼–è¾‘å™¨å›¢é˜Ÿçš„åšå®¢ï¼š[How CRDTs make multiplayer text editing part of Zed's DNA](https://zed.dev/blog/crdts)
- ä¸€ä¸ªä¸“é—¨ä»‹ç»CRDTçš„ç½‘ç«™ï¼š[crdt.tech](https://crdt.tech/)

ç›¸å…³Reposï¼š
- [GitHub - automerge/automerge: A JSON-like data structure (a CRDT) that can be modified concurrently by different users, and merged again automatically.](https://github.com/automerge/automerge)
- [GitHub - y-crdt/y-crdt: Rust port of Yjs](https://github.com/y-crdt/y-crdt)
- [GitHub - yjs/yjs: Shared data types for building collaborative software](https://github.com/yjs/yjs)
:::

### ç»§ç»­æ”¾é£æƒ³è±¡åŠ›

æˆ‘ä»¬è¿˜ä»¥ Notion ä¸ºä¾‹ã€‚ä¸€ä¸ª Notion ç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ª workspaceã€‚å¦‚æœæ•°æ®å…¨éƒ¨æ”¾åœ¨æœ¬åœ°ï¼Œä»¥ CRDT çš„å½¢å¼ä¿å­˜æˆæ–‡ä»¶ï¼Œé‚£ä¹ˆä¸€ä¸ª workspace åœ¨æœ¬åœ°å¯ä»¥å­˜å‚¨åœ¨ä¸€ä¸ªç›®å½•ä¸‹ã€‚æ ¹ç›®å½•ä¸‹å¯ä»¥å­˜æ”¾è¿™ä¸ª workspace ä¸‹æ‰€æœ‰ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ï¼Œç”¨ä¸€ä¸ª automerge ä¸‹çš„ tableï¼ˆå§‘ä¸”ç®€ç§° amtï¼‰ï¼Œå­˜ä¸º user.amtã€‚è¿™ä¸ªæ–‡ä»¶é‡Œçš„ç”¨æˆ·ä¿¡æ¯ï¼Œå½“å‰ç”¨æˆ·åªèƒ½ä¿®æ”¹è‡ªå·±é‚£ä¸€è¡Œï¼›workspace çš„ owner / admin å¯ä»¥å¢åˆ æ”¹ã€‚ç”¨æˆ·ä¿¡æ¯ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ª permission.amtï¼Œå­˜å‚¨æ¯ä¸ªç”¨æˆ·åœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸‹çš„è§’è‰²ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ oso[7]ï¼Œé€šè¿‡ RABC æ¥å¤„ç†æˆæƒã€‚user/permission ç›¸å½“äº workspace çš„ metadataï¼Œå…¶å®ƒçš„ metadataï¼ˆæ¯”å¦‚é…ç½®ï¼‰æˆ‘ä»¬æ”¾ä¸‹ä¸è¡¨ã€‚

workspace æ‰¿è½½çš„æ˜¯ç”¨æˆ·çš„æ•°æ®ã€‚å¯¹äºç›®å½•æ ‘ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ª workspace.amt æ¥ä¿å­˜ç›®å½•æ ‘çš„ CRDT æ•°æ®ã€‚ç›®å½•æ ‘ä¸‹æœ‰å­ç›®å½•æˆ–æ–‡ä»¶ï¼Œå­ç›®å½•ä¸‹æœ‰æ›´æ·±çš„ç›®å½•æˆ–è€…æ–‡ä»¶ã€‚å’Œæ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•æ ‘ç±»ä¼¼ï¼Œè¿™é‡Œçš„æ–‡ä»¶æˆ‘ä»¬æ”¾ä¸€ä¸ªå¼•ç”¨ï¼Œç„¶åæ–‡ä»¶æœ¬èº«æœ‰å•ç‹¬çš„ amtï¼Œå¦‚ doc4.amtã€‚æ•´ä¸ª workspace çš„ç»“æ„å¦‚ä¸‹ï¼š

![image.png](https://raw.githubusercontent.com/fw6/assets/main/toy_docs/20230814142643.png)

å½“ç”¨æˆ·åœ¨ UI ä¸Šå¯¹æŸä¸ªæ–‡æ¡£åšäº†ä¸€ä¸ªæ”¹åŠ¨åï¼Œè¿™ä¸ªæ”¹åŠ¨çš„ `change` ä¼šä»å‰ç«¯ç•Œé¢å‘é€åˆ°åº”ç”¨çš„åç«¯ï¼ˆéæœåŠ¡å™¨çš„åç«¯ï¼‰ã€‚åœ¨åº”ç”¨çš„åç«¯ï¼Œautomerge backend å¯¹æ”¹åŠ¨è¿›è¡Œå¤„ç†åï¼Œä¼šç”Ÿæˆä¸€ä¸ª patchï¼Œæäº¤å› frontend å» `apply`ã€‚åŒæ—¶ï¼Œè¿™ä¸ªæ”¹åŠ¨é€šè¿‡ç½‘ç»œï¼ˆå¯ä»¥æ˜¯æœåŠ¡å™¨ä¸­è½¬ï¼Œä¹Ÿå¯ä»¥æ˜¯ p2p ç½‘ç»œï¼‰ä¼ æ’­å‡ºå»ã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ libp2p ä¸‹çš„ gossipsubï¼Œåœ¨æŸä¸ª topic ä¸‹ä¼ æ’­ã€‚topic å¯ä»¥æ˜¯æŸä¸€ä¸ª workspaceï¼Œåªæœ‰åœ¨è¿™ä¸ª workspace ä¸‹çš„ç”¨æˆ·æ‰èƒ½åŠ å…¥åˆ°è¿™ä¸ª topic ä¸‹ã€‚å½“å®¢æˆ·ç«¯ B æ”¶åˆ°è¿™ä¸ª `syncMessage` åï¼Œå®ƒä¼šæäº¤ç»™ automerge backendï¼Œç”Ÿæˆ patchï¼Œæäº¤ç»™ frontend `apply`ã€‚

![image.png](https://raw.githubusercontent.com/fw6/assets/main/toy_docs/20230814142732.png)

å¦‚æœæ•´ä¸ªç³»ç»Ÿä¸­æœ‰æœåŠ¡å™¨ä¸­è½¬äº‹ä»¶ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å¯ä»¥ tap å‡ºä¸€ä»½ amt ä½œä¸ºå¤‡ä»½ã€‚ä¸€ä¸ªæ–°åŠ å…¥çš„å®¢æˆ·ç«¯å¯ä»¥è¿…é€Ÿä»æœåŠ¡å™¨æ‹¿åˆ°æ•´ä¸ªå†å²è®°å½•ï¼Œè¿›è€Œå‚ä¸åˆ° workspace çš„åä½œä¸­ã€‚å¦‚æœæ•´ä¸ªç³»ç»Ÿä¸­æ²¡æœ‰æœåŠ¡å™¨ä¸­è½¬äº‹ä»¶ï¼Œä½¿ç”¨çš„æ˜¯ p2p ç½‘ç»œï¼Œé‚£ä¹ˆæœåŠ¡å™¨å¯ä»¥å……å½“ p2p ç½‘ç»œä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œtap å‡º amt åšå¤‡ä»½ã€‚æ–°åŠ å…¥çš„å®¢æˆ·ç«¯èŠ‚ç‚¹å¯ä»¥ä»å…¶ä»»ä¸€ä¸ªé‚»å±…é‚£é‡Œè¦å®Œæ•´çš„æ•°æ®ã€‚

### å–èˆï¼ˆTrade offï¼‰

CRDTçš„å¥½å¤„ï¼š
- - local firstï¼šæ•°æ®å­˜å‚¨åˆ°æœ¬åœ°ï¼Œå³æ—¶çš„å“åº”é€Ÿåº¦ï¼Œå…è®¸ç¦»çº¿å¤„ç†ã€‚
- å¯ä»¥ä¸ä¾èµ–æœåŠ¡å™¨è€Œåœ¨å®¢æˆ·ç«¯æä¾›å„ç§å„æ ·çš„æ•°æ®è®¿é—®çš„æ–¹å¼ï¼ˆfilter, aggregate, projection, gorupby ç­‰ç­‰ï¼‰ï¼Œç”šè‡³ï¼Œå¯ä»¥æä¾› API è®©æœ¬åœ°æ•°æ®å¾ˆå®¹æ˜“è¢« pandas ç­‰å·¥å…·ä½¿ç”¨ã€‚
- å³ä¾¿ä½¿ç”¨æœåŠ¡å™¨ä¸­è½¬ï¼Œå…¶æœåŠ¡å™¨èµ„æºçš„å¼€é”€ç›¸å¯¹è¦å°å¾ˆå¤šï¼Œå¯¹äºä¸€ä¸ªå¤§å‹çš„é¡¹ç›®ï¼ŒèŠ‚çœçš„èµ„é‡‘ä¼šå¾ˆå¯è§‚ã€‚

ç¼ºç‚¹ï¼š
- éšç€æ—¶é—´æœ¬åœ°æ•°æ®ä¼šå¢é•¿å¾—è¶Šæ¥è¶Šå¤§ï¼Œç”±äºå­˜å‚¨ç€æ•°æ®çš„å…¨é›†ï¼Œè¿™ä¸ªæ•°é‡å¯èƒ½ä¼šå¾ˆå¯è§‚ï¼ˆå¯ä»¥æœ‰ä¸€äº›ä¼˜åŒ–ï¼Œæ¯”å¦‚ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡ï¼Œè§†é¢‘è¿™æ ·çš„é™æ€èµ„æºå¯ä»¥æ”¾åœ¨ S3ï¼Œæœ¬åœ°åªæ”¾é“¾æ¥ï¼Œè®¿é—®æ—¶å†è·å– presigned urlï¼‰ï¼Œæ‰€ä»¥ï¼Œè¿™ç§æ–¹æ³•å¾ˆå¯èƒ½**ä¸é€‚åˆåœ¨æµè§ˆå™¨ç«¯ä½¿ç”¨**ã€‚
- æ•´ä¸ªç³»ç»Ÿçš„å¤æ‚åº¦æ¯”å¤§å®¶ç†Ÿæ‚‰çš„ web æŠ€æœ¯æ ˆè¦å¤§å¾ˆå¤šã€‚
- æŠ€æœ¯æ ˆå°ä¼—ï¼Œå¾ˆéš¾æ‰¾åˆ°åˆé€‚çš„å·¥ç¨‹å¸ˆï¼ˆå½“ç„¶ï¼Œè¿™ä¹Ÿæ„å‘³ç€ä¸€æ—¦æ‰¾åˆ°ï¼Œå¿…ç„¶æ˜¯ä¼˜ç§€çš„å·¥ç¨‹å¸ˆï¼‰ã€‚
- å¸‚åœºä¸Šç¼ºä¹æˆåŠŸçš„å…ˆä¾‹ï¼ˆæˆ‘æŒ‡ä¸“é—¨å¤„ç†åˆ—è¡¨å’Œæ–‡æ¡£è¿™å—çš„ sequence CRDTï¼Œå…¶å® CRDT åœ¨å¾ˆå¤šè½¯ä»¶ä¸­å·²ç»å¾—åˆ°äº†å¹¿æ³›ä½¿ç”¨ï¼Œæ¯”å¦‚ phoenix frameworkï¼Œredis ç­‰ï¼‰ã€‚

## æ¿€è¡äºŒåå¹´ï¼šHTTP APIçš„å˜è¿

[æ¿€è¡äºŒåå¹´ï¼šHTTP API çš„å˜è¿ | ç¨‹åºäººç”Ÿ](https://mp.weixin.qq.com/s/9TAYgS74yVdNmjduRycy4A)

è¿™ç¯‡æ–‡ç« æ‰€ä»‹ç»çš„ API çš„å˜è¿ï¼Œç‰¹æŒ‡å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿è¡Œçš„ HTTP APIã€‚ä¸€åˆ‡å…¶ä»–åè®®çš„ APIï¼ˆå¦‚ TCPï¼‰ï¼Œæˆ–è€…æœåŠ¡å™¨ä¹‹é—´çš„ HTTP APIï¼ˆå¦‚ gRPCï¼‰ï¼Œä¸åœ¨æ·±å…¥è®¨è®ºä¹‹åˆ—ã€‚

### 2005å¹´ä¹‹å‰ï¼šAPI çš„ç‹‚é‡è¥¿éƒ¨

æ—©æœŸçš„äº’è”ç½‘æ˜¯éå¸¸ç‹‚é‡çš„ï¼Œæ²¡æœ‰æ‰€è°“å‰ç«¯åç«¯ä¹‹åˆ†ã€‚PHP å¼€å‘è€…å¯ä»¥æŠŠä»å¤„ç†ç”¨æˆ·çš„ HTTP è¯·æ±‚ï¼Œè¿æ¥ mysqlï¼Œç»„è£… SQL è¿›è¡ŒæŸ¥è¯¢ï¼Œå°†æŸ¥è¯¢ç»“æœè½¬æ¢æˆ HTMLï¼Œä¸€è·¯åˆ° HTML å“åº”è¿”å›ç»™ç”¨æˆ·çš„æ•´ä¸ªä¸šåŠ¡é€»è¾‘æ”¾åœ¨ä¸€ä¸ªï¼ˆæˆ–è€…è‹¥å¹²ä¸ªï¼‰å¦‚æ„å¤§åˆ©é¢æ¡èˆ¬çš„è„šæœ¬ä¸­ã€‚
![image.png](https://raw.githubusercontent.com/fw6/assets/main/toy_docs/20230816172450.png)

æ—©æœŸå¾®è½¯æŠŠå¤ªå¤šçš„èµŒæ³¨æ”¾åœ¨äº†æ›²é«˜å’Œå¯¡çš„ WSDLï¼ˆä»¥åŠæœåŠ¡å‘ç°åè®® UDDIï¼‰ä¸Šï¼Œå…¶ä¸»æ‰“åš web å¼€å‘çš„ ASP.Net ä¸€ç›´ä¸æ¸©ä¸ç«ï¼Œæ ¹æœ¬æ— æ³•ä¸çº¢éå¤©çš„ PHP ç›¸æå¹¶è®ºã€‚åœ¨ 2005 å¹´ä¹‹å‰ï¼Œå¯ä»¥è¯´ï¼Œï¼ˆåœ¨ web ä¸–ç•Œé‡Œï¼‰ï¼Œ**PHP æ˜¯å®‡å®™ä¸­æœ€å¥½çš„è¯­è¨€**ã€‚

### 2005-2010ï¼šä»æ··æ²Œåˆ°æœ‰åº â€” Ruby on Rails æ¨ªç©ºå‡ºä¸–

rails æ˜¯ä¸€ä¸ªè¶³ä»¥è½½å…¥å²å†Œçš„æ¡†æ¶ï¼šå®ƒæŠŠè½¯ä»¶å¼€å‘ä¸­çš„å¾ˆå¤šéå¸¸æœ‰ç›Šçš„æ¦‚å¿µã€æ¨¡å¼å’Œæ€æƒ³ï¼ˆåŒ…æ‹¬ä½†ä¸é™äº `ORM`ï¼Œ`CoC`ï¼Œ`MVC` ç­‰ï¼‰ç³…åˆåœ¨è‡ªå·±ä½“å†…ï¼Œæ„å»ºäº†ä¸€ä¸ªå¼ºå¤§åŒæ—¶éå¸¸æ˜“ç”¨çš„ web å¼€å‘ç³»ç»Ÿã€‚åœ¨ rails ä¸‹ï¼Œå“ªæ€•ä½ æ˜¯ä¸ª web å¼€å‘çš„å°ç™½ï¼Œåœ¨å­¦ä¹ äº† rails çš„å¼€å‘æ–‡æ¡£åï¼Œä¹Ÿèƒ½å¾ˆå¿«æ’°å†™å‡ºä¸€å¥—è®©å¾ˆå¤š web å¼€å‘è€é¸Ÿè‰³ç¾¡çš„ç³»ç»Ÿã€‚åœ¨ rails è¯¸å¤šåˆ›æ–°ä¹‹ä¸­ï¼Œè¦æ•° `ActiveRecord` æœ€ä¸ºç»éªŒï¼Œå®ƒä»¥ç®€æ´ä¼˜é›…çš„è¡¨è¿°ï¼Œé¢ è¦†äº†äººä»¬ä¼ ç»Ÿä¸Šå¯¹æ•°æ®åº“çš„è®¤çŸ¥ï¼Œå¹¶ä¸”å‡ ä¹å‡­å€Ÿä¸€å·±ä¹‹åŠ›ï¼ŒæŠŠ ORM æ§ä¸Šäº†ç¥å›ã€‚

éšç€ rails ä¸€èµ·æˆé•¿çš„è¿˜æœ‰ XMLHttp object ï¼ˆä¿—ç§° Ajaxï¼‰çš„æ ‡å‡†åŒ–ï¼Œä»¥åŠ JSON çš„å¹¿æ³›ä½¿ç”¨ã€‚å…¶ä¸­ï¼ŒGoogle é€šè¿‡å…¶æ——ä¸‹çš„ gmail / google maps å¤§å¤§ä¿ƒè¿›äº†äººä»¬å¯¹ Ajax çš„è®¤çŸ¥ï¼Œè€Œ PHP5 å’Œ rails 3 åˆ™å°† JSON åœ¨å¹¿å¤§å¼€å‘è€…ä¸­æ¨å¹¿å¼€æ¥ï¼Œä½¿å…¶é€æ¸å–ä»£ç¬¨æ‹™ä½æ•ˆçš„ XMLã€‚æœ‰æ„æ€çš„æ˜¯ï¼ŒAjax æœ€åˆæ˜¯ *Asynchronous Javascript And XML*ï¼ŒJSON æ™®åŠåï¼Œè¿™ä¸ª XML å†ä¹Ÿæ²¡äººæåŠã€‚

ç”± rails åˆ®èµ·çš„ ORM ä¹‹é£æ„ˆæ¼”æ„ˆçƒˆï¼Œå®ƒå‡ ä¹æˆä¸ºäº† web å¼€å‘è€…è®¿é—®æ•°æ®åº“çš„å”¯ä¸€æ ‡å‡†ã€‚æ¸æ¸çš„ï¼Œå­˜å‚¨è¿‡ç¨‹ï¼ˆstored procedure / functionï¼‰è¢«é›ªè—ï¼Œè§¦å‘å™¨ï¼ˆtriggerï¼‰è¢«é—å¿˜ï¼Œæ•°æ®åº“å¤æ‚è€Œè¿·äººçš„æƒé™ç®¡ç†è¢«å¼ƒä¹‹ä¸é¡¾ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ç”¨ä¸€ä¸ªå‡ ä¹å…·æœ‰ root æƒé™çš„ç”¨æˆ·æ¥è¿æ¥æ•°æ®åº“ï¼Œè€Œæƒé™çš„ç®¡ç†å…¨éƒ¨è¢«å‰ç§»åˆ°äº†åº”ç”¨å±‚ã€‚è¿™å’Œ ORM æ‰€å€¡å¯¼çš„ã€Œä¸€å¥—ä»£ç å¤„ç†å¤šç§æ•°æ®åº“ã€æœ‰è«å¤§çš„è”ç³»ã€‚äº‹å®ä¸Šï¼ŒORM å¸¦ç»™å¤§å®¶åˆ‡æ¢æ•°æ®åº“çš„å¥½å¤„ï¼Œå¯èƒ½ä»…é™äºå¼€å‘ç¯å¢ƒç”¨ sqliteï¼Œç”Ÿäº§ç¯å¢ƒç”¨ postgres è¿™æ ·çš„ä¾¿åˆ©ã€‚ä½†ä»ç®¡ç†çš„è§’åº¦ï¼ŒORM è®©å¼€å‘è€…ç»•è¿‡ DBAï¼ˆæˆ–è€…å¹²è„†ä¸è¦ DBAï¼‰è¿›è¡Œå¿«é€Ÿå¼€å‘ï¼Œå¯¹äºå°å‹é¡¹ç›®ï¼Œå¯ä»¥é«˜æ•ˆå¼€å‘ï¼Œä¸”ä¸éœ€è¦æ„å»ºæ•°æ®åº“é¢†åŸŸçš„ä¸“æœ‰æŠ€èƒ½ï¼Œæ¯•ç«ŸåŸ¹å…»ä¸€ä¸ª web å·¥ç¨‹å¸ˆï¼Œä¸¤ä¸‰ä¸ªæœˆçš„è®­ç»ƒè¥å°±å¯ä»¥è®©ä¸€ä¸ªç´ äººå¾ˆå¥½æŒæ¡å¼€å‘æ¡†æ¶ï¼Œè¿›è¡Œã€Œé«˜æ•ˆã€ CRUD å¼€å‘ï¼›è€ŒåŸ¹å…»ä¸€ä¸ªåˆæ ¼çš„ DBAï¼Œéœ€è¦æ•´ä¸ªè®¡ç®—æœºä½“ç³»çŸ¥è¯†çš„æ²‰æ·€ã€‚

### 2010-2015ï¼šç§»åŠ¨äº’è”ç½‘ â€” API é£ä¸Šæå¤´å˜å‡¤å‡°

ç”±äºç§»åŠ¨åº”ç”¨æ‹¥æœ‰è‡ªå·±çš„ UI å±‚ï¼Œä¸åƒæµè§ˆå™¨é‚£æ ·ï¼ŒUI å±‚æ˜¯ç”±æœåŠ¡å™¨è¿”å›çš„ HTML æ¸²æŸ“å‡ºæ¥ï¼Œå› è€Œç§»åŠ¨ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´æœ‰ç€å¼ºçƒˆçš„å¯¹ç®€æ´é«˜æ•ˆä¸”æ ‡å‡†åŒ–çš„ API å±‚çš„éœ€æ±‚ã€‚åœ¨è¿™ç§éœ€æ±‚çš„å‚¬ç”Ÿä¸‹ï¼ŒRESTï¼ˆRepresentational state transferï¼‰è¿™ä¸ªå½“æ—¶å·²ä¸æ–°é²œçš„æ¦‚å¿µæ¸æ¸ä»è±¡ç‰™å¡”èµ°å…¥äº†å·¥ä¸šç•Œã€‚äººä»¬å‘ç°ï¼Œä¸å…¶è‡ªå·±éšæœºæŒ‡å®šä¸€å¥— HTTP API çš„è§„çº¦ï¼Œä¸å¦‚éµå¾ª HTTP/1.1 è§„èŒƒï¼Œè®© API çš„è¡¨è¿°å’Œè§„èŒƒé æ‹¢ã€‚è¿™ä¸ªæ—¶æœŸï¼Œå„ä¸ªæ¡†æ¶è¦ä¹ˆå¼€å§‹å†…å»ºå¯¹ RESTful API çš„æ”¯æŒï¼Œè¦ä¹ˆåœ¨æ¡†æ¶ä¹‹ä¸Šï¼Œç‹¬ç«‹å‡ºä¸€å¥—ä¸“é—¨ä¸º API ä¼˜åŒ–çš„æ¡†æ¶ï¼Œæ¯”å¦‚ 2012 å¹´å°±æ¯”è¾ƒæˆç†Ÿçš„ django REST frameworkï¼š

![image.png](https://raw.githubusercontent.com/fw6/assets/main/toy_docs/20230816173059.png)

è¿™ä¸ªæ—¶æœŸï¼Œå¦‚é›¨åæ˜¥ç¬‹èˆ¬ç»½æ”¾çš„ä¼—å¤š REST API framework ç»™å¼€å‘è€…å¸¦æ¥çš„å·¨å¤§å¥½å¤„æ˜¯ï¼Œä½ å³ä¾¿ä¸æŒæ¡ HTTP/1.1 åè®®çš„ç»†èŠ‚ï¼Œä¹Ÿå¯ä»¥åšå‡ºåƒæ ·çš„ APIï¼Œæ¥å¤„ç†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é—´çš„äº¤äº’ã€‚

ç„¶è€Œï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ API æ¡†æ¶éƒ½è¶³å¤Ÿä¸¥è°¨ï¼Œè¶³å¤Ÿéµå¾ªåè®®æœ¬èº«ã€‚å¾ˆå¤š API æ¡†æ¶ï¼Œåœ¨å¤„ç†å¤æ‚çš„åè®®æµç¨‹æ—¶ï¼Œè¦ä¹ˆä¼šæœ‰è‡ªç›¸çŸ›ç›¾çš„å¤„ç†ï¼Œè¦ä¹ˆæŠŠè¿™äº›ç»†èŠ‚å®Œå…¨äº¤ç”±å¼€å‘è€…å¤„ç†ã€‚ç„¶è€Œï¼Œä½ å¦‚ä½•ä¿è¯åªçƒ­è¡·äºè¿›è¡Œ CRUD çš„å¼€å‘è€…èƒ½å¤Ÿæ­£ç¡®ä½¿ç”¨ ETag ä½œä¸ºä¹è§‚é”ï¼ˆoptimistic lockingï¼‰è¿›è¡Œæ¡ä»¶æ›´æ–°ï¼ˆconditional updateï¼‰å‘¢ï¼Ÿ

åœ¨ web ä¸–ç•Œä¸ä¸ºäººçŸ¥çš„è§’è½ï¼ŒErlang çš„ webmachine å°½ç€æœ€å¤§çš„åŠªåŠ›æ¥ç¡®ä¿ API çš„å¤„ç†ç¬¦åˆ HTTP åè®®ã€‚å¾—ç›Šäº erlang å¼ºå¤§çš„ pattern matching çš„èƒ½åŠ›ï¼Œwebmachine åœ¨å†…éƒ¨æ„å»ºäº†ä¸€å¼ åºå¤§çš„å†³ç­–æ ‘ï¼Œæ¶µç›–äº† API å¤„ç†çš„æ¯ä¸€ä¸ªç»†èŠ‚ï¼Œè¿æ¯ä¸ªé”™è¯¯è¿”å›çš„çŠ¶æ€ç éƒ½ç²¾ç›Šæ±‚ç²¾ã€‚
![image.png](https://raw.githubusercontent.com/fw6/assets/main/toy_docs/20230816173300.png)

å¦ä¸€ä¸ªå°ä¼—è¯­è¨€ clojure çš„å°ä¼—æ¡†æ¶ liberator ä¹ŸæŠŠ webmachine çš„è¿™ä¸€æ€æƒ³å­¦äº†è¿‡å»ï¼Œå¹¶å‘æ‰¬å…‰å¤§ï¼š
![image.png](https://raw.githubusercontent.com/fw6/assets/main/toy_docs/20230816173347.png)


ç„¶è€Œï¼Œç§»åŠ¨äº’è”ç½‘ä¸æ˜¯å°ä¼—è¯­è¨€å’Œå°ä¼—æ¡†æ¶çš„æˆ˜åœºã€‚ä½•å†µï¼ŒAPI æ¯•ç«Ÿæ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å…±åŒçš„çº¦å®šï¼Œåœ¨é‚£ä¸ªå¹´ä»£ï¼ŒæœåŠ¡ç«¯çš„ä¸¥è°¨ä¼šç»™å®¢æˆ·ç«¯å¸¦æ¥ä¸å°çš„å›°æƒ‘ï¼šç›¸è¾ƒäº 412 Preconditional failed è€Œè¨€ï¼Œå®¢æˆ·ç«¯å·¥ç¨‹å¸ˆæ›´é’Ÿæƒ…äºä¸€æ‹›é²œåƒéå¤©çš„ 400 Bad request

### 2015-2020ï¼šç±»å‹å®‰å…¨ â€” æ–°çš„å…±è¯†

2015 å¹´ï¼Œfacebook é¦–å…ˆç”¨å¼€æºçš„å†…éƒ¨é¡¹ç›® GraphQL å‘ä¸šç•Œæ‰“å‡ºäº†æ„å›¾å–ä»£ RESTful API çš„ä¸€è®°é‡æ‹³ã€‚GraphQL ä»è¾“å…¥å’Œè¾“å‡ºå…¥æ‰‹ï¼Œåœ¨ HTTP åè®®ä¹‹ä¸Šå®šä¹‰äº†ä¸€å¥—æŸ¥è¯¢è¯­è¨€ â€”â€” å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´éœ€è¦å®šä¹‰å¥½æ”¯æŒçš„ query / mutation / subscription çš„ schemaï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºæ•°æ®ç»“æ„çš„ typeã€‚

GraphQL æå‡ºäº†ä¸€ä¸ªçœ‹å¾… API çš„å…¨æ–°è§†è§’ï¼šå®¢æˆ·ç«¯ä½¿ç”¨è€…å¯ä»¥æ ¹æ®éœ€è¦çµæ´»å®šä¹‰ä»–ä»¬æƒ³æŸ¥è¯¢çš„æ•°æ®ï¼Œè€Œä¸éœ€è¦çœ‹æœåŠ¡ç«¯è€çˆ·ä»¬çš„è„¸è‰²ã€‚åœ¨å›ºæ‰§çš„ RESTful API çš„åŸæ•™æ—¨ä¸»ä¹‰è€…çœ¼é‡Œï¼ŒAPI åº”è¯¥ä¸¥æ ¼å¯¹åº”èµ„æºï¼Œå› è€Œä¸€ä¸ª app é¡µé¢å¦‚æœåŒ…å«ä¸‰ç§ä¸åŒçš„èµ„æºï¼Œé‚£ä¹ˆå®ƒå°±è¦è®¿é—®ä¸‰ä¸ªä¸åŒçš„ API æ¥è·å¾—ç»“æœã€‚å¯¹å®¢æˆ·ç«¯æ¥è¯´ï¼Œè¿™é¢å¤–å¤šäº†ä¸¤ä¸ªæµªè´¹ç”¨æˆ·å®è´µç­‰å¾…æ—¶é—´çš„ roud tripï¼Œä¸ºä»€ä¹ˆä¸èƒ½ä¸€ä¸ªæŸ¥è¯¢å°±è·å¾—æˆ‘æƒ³è¦çš„æ•°æ®ï¼Œä¸”ä»…åŒ…å«æˆ‘æƒ³è¦çš„æ•°æ®å‘¢ï¼Ÿ

è¿™ä¸ªæƒ³æ³•å¾ˆæœ‰åˆ›æ„ï¼Œä½†å®ƒå¿½è§†äº†çµæ´»æ€§å¸¦æ¥çš„å¯èƒ½å¹¶ä¸å€¼å¾—çš„å¤æ‚æ€§ã€‚GraphQL çš„ç†æƒ³æƒ…å†µä¸€ç›´æ²¡æœ‰å¾ˆå¥½åœ°è¾¾æˆï¼Œå› ä¸ºæœåŠ¡ç«¯ä¸å¯èƒ½ä¸ºä¸€ä¸ªå¤šå±‚éšæ„åµŒå¥—çš„æŸ¥è¯¢å»å‡†å¤‡æ•°æ®ã€‚åŒæ—¶ GraphQL è¿˜æœ‰å…¶ä»–å¾ˆå¤šè®¾è®¡ä¸Šè€ƒè™‘ä¸å‘¨çš„é—®é¢˜ï¼Œå…¶ä¸­æœ€è®©äººè¯Ÿç—…çš„æ˜¯ï¼Œå¯¹ HTTP åè®®çš„æ— è§†ï¼Œä¹Ÿå°±å¯¼è‡´æ•´ä¸ª HTTP ç”Ÿæ€å’Œ GraphQL å·¥ä½œåœ°å¾ˆåˆ«æ‰­ï¼Œè¿˜æœ‰æŸ¥è¯¢æ—¶ n+1 çš„é—®é¢˜ï¼ˆdata loader åªæ˜¯ä¸ªç‰¹å®šåœºæ™¯çš„è§£å†³åŠæ³•ï¼‰ã€‚

å¤§éƒ¨åˆ†æ”¯æŒ GraphQL æˆ–è€… OpenAPI çš„æ¡†æ¶éµä»ç¨‹åºå‘˜çš„æœ¬æ€§ï¼Œè®©ä½ å¯ä»¥ä¸“æ³¨äºå†™ä»£ç ï¼Œé¡ºå¸¦ç”Ÿæˆç›¸åº”çš„ schemaã€‚è¿™æ˜¯å…¸å‹çš„ code first çš„æ€ç»´ã€‚

è€Œ schema first çš„ä»£è¡¨è¦æ•° gRPC â€”â€” ä½ æ’°å†™ protobuf å®šä¹‰ï¼Œç›¸åº”çš„ç¼–è¯‘å™¨ä¼šæ›¿ä½ ç”Ÿæˆä»£ç ã€‚

è¿™ä¸¤ç§æ–¹æ¡ˆçš„èƒŒåï¼Œå®é™…ä¸Šæ˜¯æ¡†æ¶æ€ç»´å’Œç¼–è¯‘å™¨æ€ç»´çš„è¾ƒé‡ã€‚

![image.png](https://raw.githubusercontent.com/fw6/assets/main/toy_docs/20230816173910.png)

### 2020-è‡³ä»Šï¼šä½ä»£ç æ—¶ä»£ â€” API ä½•å»ä½•ä»ï¼Ÿ

#### postgREST

ä»¥æ•°æ®åº“ schema ä¸ºå•ä¸€æ•°æ®æ¥æºï¼Œç”±å†…åŠå¤–åœ°ç”Ÿæˆ API schemaï¼Œç”šè‡³ API æœ¬èº«ã€‚

ä½¿ç”¨ postgRESTï¼Œå¼€å‘è€…åªéœ€æ­£å¸¸å®šä¹‰æ•°æ®åº“ä¸­çš„è¡¨ï¼Œè§†å›¾ï¼Œå‡½æ•°ï¼Œè§¦å‘å™¨ç­‰ï¼Œå¹¶ä¸ºå®ƒä»¬çš„ä½¿ç”¨æƒé™èµ‹äºˆç›¸åº”çš„è§’è‰²å³å¯ã€‚postgREST å¯ä»¥æ ¹æ®æ•°æ®åº“çš„ infoschemaï¼ŒæŒæ¡è¯¦ç»†çš„ metadataï¼Œå¹¶ç”¨è¿™äº› metadata æ¥éªŒè¯ API çš„è¾“å…¥ï¼Œä¹Ÿå°±æ˜¯ Requestï¼Œå¦‚æœéªŒè¯é€šè¿‡ï¼Œä¼šæ ¹æ® Request ç”Ÿæˆç›¸åº”çš„ SQL æŸ¥è¯¢ï¼Œç„¶åæŠŠç»“æœåºåˆ—åŒ–æˆå®¢æˆ·ç«¯éœ€è¦çš„ç»“æ„ï¼Œä»¥ Response è¿”å›ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºè¿™æ ·ä¸€ä¸ª API è¯·æ±‚ï¼š`GET /people?age=gte.18&student=is.true` ï¼ŒpostgREST ä¼šéªŒè¯æ•°æ®åº“ä¸­åŒ…å« people è¡¨æˆ–è€…è§†å›¾ï¼Œå¹¶ä¸”å…¶å«æœ‰ age / student è¿™ä¸¤ä¸ªå­—æ®µï¼Œå‰è€…æ˜¯æ•´å‹ï¼Œåè€…æ˜¯å¸ƒå°”å‹ã€‚å¦‚æœä¸€åˆ‡ç¬¦åˆï¼Œå¹¶ä¸”ç”¨æˆ·å…·å¤‡ people è¡¨æˆ–è€…è§†å›¾çš„ SELECT æƒé™ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šç”Ÿæˆ `select * from people where age >= 18 and student = true` è¿™æ ·ä¸€æ¡æŸ¥è¯¢ï¼Œè¿”å›ç›¸åº”çš„ JSONï¼ˆé»˜è®¤å®¢æˆ·ç«¯ `accept: application/json`ï¼‰ã€‚