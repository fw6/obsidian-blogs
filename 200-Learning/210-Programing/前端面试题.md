---
title: "前端面试题"
description: ""
pubDate: "2023-08-02 09:22"
heroImage: "https://images.unsplash.com/photo-1666278749123-6cc58220fda9?crop=entropy&cs=srgb&fm=jpg&ixid=M3wzNjM5Nzd8MHwxfHJhbmRvbXx8fHx8fHx8fDE2OTA5MzkzNTJ8&ixlib=rb-4.0.3&q=85"
date created: "2023-08-02 09:22"
date modified: "2023-08-02"
draft: true
tags:
    - writings
---

## TOC


## 浏览器

### DOM树怎么生成的?

一旦浏览器收到第一块数据，它就开始解析收到的信息。“解析”是浏览器将通过网络接收到的数据转换为DOM、CSSOM的步骤，通过渲染器把DOM和CSSOM在屏幕上绘制成页面。

:::info
即使请求的页面HTML超过了14KB，浏览器也将开始解析尝试根据其数据进行渲染。这就是为什么在前14KB中包含浏览器开始渲染页面的所有内容，或至少包含页面模板（第一次渲染所需的CSS和HTML），这对Web性能优化很重要。
:::

渲染DOM树分为5个阶段：
1. 处理HTML标记并构造DOM树。当遇到CSS文件、非阻塞资源（如图片）时解析继续进行，但对于没有`defer`或`async`属性的`<script>`标签时，浏览器会阻塞渲染并停止HTML的解析（虽然浏览器的预加载扫描器会加速该过程）。等待获取CSS不会阻塞HTML解析但会阻塞JavaScript！
2. 处理CSS并构建CSSOM树。CSSOM包含来自用户代理样式表的样式。在此同时，也会有JavaScript编译、构建辅助功能树等过程
3. 将DOM和CSSOM组合为一个Render树。Render树将所有相关样式匹配到DOM树的每个可见节点，并根据CSS级联确定每个节点的计算样式。
4. 在渲染树上运行布局以计算每个节点的几何体。第一次确定节点的大小和位置称为布局，随后对节点和大小的重新计算称为回流。
5. 最后一步将各个节点绘制到屏幕上。绘制可以将布局树上的元素分解为多层，将内容提升到GPU上的层可以提高绘制和重绘性能。当文档中各个不同部分以不同的层绘制相互重叠时，就必须进行合成，以确保按照正确的顺序绘制到屏幕上。

### script标签中`async`和`defer`属性的区别？

带`async`属性的脚本：
- 对于普通脚本则会并行请求，并加快解析和执行；
- 对于模块脚本，那么脚本及其所有依赖都会在延迟队列中执行，确保它们会被并行请求并尽快解析和执行。

带`defer`属性的脚本：
- 对模块脚本不生效（默认`defer`）
- 对缺少`src`属性的脚本不生效
- 表示在文档解析后，但在触发`DOMContentLoaded`之前执行
- 阻塞`DOMContentLoaded`事件触发，直到脚本完成加载并执行
- 按照文档出现顺序执行

### 讲下浏览器渲染时的合成层？
